2024-04-01 15:17:10.316 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 15:17:10.506 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 15:17:10.827 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 15:18:55.675 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 15:18:55.921 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 15:18:55.927 +08:00 [DBG] Creating DbConnection.
2024-04-01 15:18:55.930 +08:00 [DBG] Created DbConnection. (1ms).
2024-04-01 15:18:55.931 +08:00 [DBG] Migrating using database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.932 +08:00 [DBG] Creating DbConnection.
2024-04-01 15:18:55.933 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 15:18:55.933 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.937 +08:00 [DBG] An error occurred using the connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.937 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.939 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:18:55.939 +08:00 [DBG] Creating DbConnection.
2024-04-01 15:18:55.939 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 15:18:55.939 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.939 +08:00 [DBG] An error occurred using the connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.939 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.939 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:18:55.939 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.941 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:55.943 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-01 15:18:55.945 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2024-04-01 15:18:55.945 +08:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2024-04-01 15:18:55.947 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2024-04-01 15:18:55.953 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2024-04-01 15:18:55.953 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:55.954 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:18:55.976 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-01 15:18:55.976 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:18:55.976 +08:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:18:55.976 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.977 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:55.977 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2024-04-01 15:18:55.977 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2024-04-01 15:18:55.977 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:55.977 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:18:55.978 +08:00 [DBG] Creating DbConnection.
2024-04-01 15:18:55.978 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 15:18:55.978 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.978 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:55.978 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.978 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:18:55.979 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-01 15:18:55.979 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-01 15:18:55.979 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-01 15:18:55.979 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.979 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:55.980 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-04-01 15:18:55.980 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-04-01 15:18:55.980 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:55.981 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:18:55.981 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.981 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:55.981 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 15:18:55.981 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 15:18:55.981 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 15:18:55.982 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-01 15:18:55.982 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-01 15:18:55.983 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:55.983 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 15:18:55.983 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:55.983 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:18:55.988 +08:00 [INF] Applying migration '20240401071710_InitialMigration'.
2024-04-01 15:18:55.995 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:55.995 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:55.996 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-04-01 15:18:55.997 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-04-01 15:18:55.997 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-01 15:18:55.997 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:18:55.997 +08:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:18:55.998 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Cities" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Cities" PRIMARY KEY AUTOINCREMENT,
    "Name" TEXT NOT NULL,
    "Description" TEXT NULL
);
2024-04-01 15:18:55.998 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Cities" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Cities" PRIMARY KEY AUTOINCREMENT,
    "Name" TEXT NOT NULL,
    "Description" TEXT NULL
);
2024-04-01 15:18:55.998 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-01 15:18:55.998 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:18:55.998 +08:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:18:55.998 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "PointsOfInterest" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_PointsOfInterest" PRIMARY KEY AUTOINCREMENT,
    "Name" TEXT NOT NULL,
    "CityId" INTEGER NOT NULL,
    CONSTRAINT "FK_PointsOfInterest_Cities_CityId" FOREIGN KEY ("CityId") REFERENCES "Cities" ("Id") ON DELETE CASCADE
);
2024-04-01 15:18:55.998 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "PointsOfInterest" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_PointsOfInterest" PRIMARY KEY AUTOINCREMENT,
    "Name" TEXT NOT NULL,
    "CityId" INTEGER NOT NULL,
    CONSTRAINT "FK_PointsOfInterest_Cities_CityId" FOREIGN KEY ("CityId") REFERENCES "Cities" ("Id") ON DELETE CASCADE
);
2024-04-01 15:18:55.998 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-01 15:18:55.998 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:18:55.998 +08:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:18:55.998 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_PointsOfInterest_CityId" ON "PointsOfInterest" ("CityId");
2024-04-01 15:18:55.998 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_PointsOfInterest_CityId" ON "PointsOfInterest" ("CityId");
2024-04-01 15:18:55.998 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-01 15:18:55.998 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:18:55.999 +08:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:18:55.999 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240401071710_InitialMigration', '8.0.0');
2024-04-01 15:18:55.999 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240401071710_InitialMigration', '8.0.0');
2024-04-01 15:18:55.999 +08:00 [DBG] Committing transaction.
2024-04-01 15:18:56.000 +08:00 [DBG] Committed transaction.
2024-04-01 15:18:56.000 +08:00 [DBG] Disposing transaction.
2024-04-01 15:18:56.000 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:18:56.000 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:18:56.001 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 15:18:56.001 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:18:56.001 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:22:39.565 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 15:22:39.755 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 15:22:40.071 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 15:22:48.489 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 15:22:48.676 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 15:22:48.682 +08:00 [DBG] Creating DbConnection.
2024-04-01 15:22:48.685 +08:00 [DBG] Created DbConnection. (1ms).
2024-04-01 15:22:48.686 +08:00 [DBG] Migrating using database 'main' on server 'CityInfo.db'.
2024-04-01 15:22:48.687 +08:00 [DBG] Creating DbConnection.
2024-04-01 15:22:48.687 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 15:22:48.688 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:22:48.693 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:22:48.694 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:22:48.695 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:22:48.697 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-01 15:22:48.699 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2024-04-01 15:22:48.699 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2024-04-01 15:22:48.699 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:22:48.700 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:22:48.701 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-04-01 15:22:48.708 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-04-01 15:22:48.708 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:22:48.709 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:22:48.709 +08:00 [DBG] Creating DbConnection.
2024-04-01 15:22:48.709 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 15:22:48.709 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:22:48.709 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:22:48.709 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:22:48.709 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:22:48.709 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-01 15:22:48.709 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-01 15:22:48.710 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-01 15:22:48.710 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:22:48.710 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:22:48.710 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-04-01 15:22:48.710 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-04-01 15:22:48.710 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:22:48.710 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:22:48.716 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:22:48.716 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:22:48.716 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 15:22:48.716 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 15:22:48.716 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 15:22:48.716 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-01 15:22:48.717 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-01 15:22:48.718 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:22:48.718 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 1ms reading results.
2024-04-01 15:22:48.718 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:22:48.718 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:22:48.723 +08:00 [INF] Applying migration '20240401072240_UpdatePointOfInterest'.
2024-04-01 15:22:48.734 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:22:48.734 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:22:48.735 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-04-01 15:22:48.736 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-04-01 15:22:48.736 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-01 15:22:48.736 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:22:48.736 +08:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:22:48.736 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "PointsOfInterest" ADD "Description" TEXT NULL;
2024-04-01 15:22:48.737 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "PointsOfInterest" ADD "Description" TEXT NULL;
2024-04-01 15:22:48.737 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-01 15:22:48.737 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:22:48.737 +08:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:22:48.737 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240401072240_UpdatePointOfInterest', '8.0.0');
2024-04-01 15:22:48.737 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240401072240_UpdatePointOfInterest', '8.0.0');
2024-04-01 15:22:48.737 +08:00 [DBG] Committing transaction.
2024-04-01 15:22:48.738 +08:00 [DBG] Committed transaction.
2024-04-01 15:22:48.738 +08:00 [DBG] Disposing transaction.
2024-04-01 15:22:48.738 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:22:48.739 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:22:48.739 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 15:22:48.739 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:22:48.739 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:26:09.731 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 15:26:09.929 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 15:26:10.262 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 15:26:24.266 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 15:26:24.464 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 15:26:24.469 +08:00 [DBG] Creating DbConnection.
2024-04-01 15:26:24.472 +08:00 [DBG] Created DbConnection. (1ms).
2024-04-01 15:26:24.473 +08:00 [DBG] Migrating using database 'main' on server 'CityInfo.db'.
2024-04-01 15:26:24.474 +08:00 [DBG] Creating DbConnection.
2024-04-01 15:26:24.475 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 15:26:24.475 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:26:24.479 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:26:24.480 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:26:24.481 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:26:24.483 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-01 15:26:24.485 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2024-04-01 15:26:24.485 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2024-04-01 15:26:24.485 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:26:24.486 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:26:24.487 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-04-01 15:26:24.493 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-04-01 15:26:24.494 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:26:24.495 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:26:24.495 +08:00 [DBG] Creating DbConnection.
2024-04-01 15:26:24.495 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 15:26:24.495 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:26:24.495 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:26:24.495 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:26:24.495 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:26:24.495 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-01 15:26:24.495 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-01 15:26:24.495 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-01 15:26:24.496 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:26:24.496 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:26:24.496 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-04-01 15:26:24.496 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-04-01 15:26:24.496 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:26:24.496 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:26:24.501 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:26:24.501 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:26:24.501 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 15:26:24.501 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 15:26:24.501 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 15:26:24.501 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-01 15:26:24.501 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-04-01 15:26:24.502 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:26:24.503 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 15:26:24.503 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:26:24.503 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:26:24.508 +08:00 [INF] Applying migration '20240401072610_InitialDataSeed'.
2024-04-01 15:26:24.521 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:26:24.521 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:26:24.522 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-04-01 15:26:24.523 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-04-01 15:26:24.523 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-01 15:26:24.523 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:26:24.524 +08:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:26:24.524 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (1, 'The one with that big park.', 'New York City');
SELECT changes();

INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (2, 'The one with the cathedral that was never really finished.', 'Antwerp');
SELECT changes();

INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (3, 'The one with that big tower.', 'Paris');
SELECT changes();
2024-04-01 15:26:24.524 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (1, 'The one with that big park.', 'New York City');
SELECT changes();

INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (2, 'The one with the cathedral that was never really finished.', 'Antwerp');
SELECT changes();

INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (3, 'The one with that big tower.', 'Paris');
SELECT changes();
2024-04-01 15:26:24.524 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-01 15:26:24.524 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:26:24.524 +08:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:26:24.524 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (1, 1, 'The most visited urban park in the United States.', 'Central Park');
SELECT changes();

INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (2, 1, 'A 102-story skyscraper located in Midtown Manhattan.', 'Empire State Building');
SELECT changes();

INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (3, 2, 'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', 'Cathedral');
SELECT changes();

INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (4, 2, 'The the finest example of railway architecture in Belgium.', 'Antwerp Central Station');
SELECT changes();

INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (5, 3, 'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', 'Eiffel Tower');
SELECT changes();

INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (6, 3, 'The world''s largest museum.', 'The Louvre');
SELECT changes();
2024-04-01 15:26:24.525 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (1, 1, 'The most visited urban park in the United States.', 'Central Park');
SELECT changes();

INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (2, 1, 'A 102-story skyscraper located in Midtown Manhattan.', 'Empire State Building');
SELECT changes();

INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (3, 2, 'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', 'Cathedral');
SELECT changes();

INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (4, 2, 'The the finest example of railway architecture in Belgium.', 'Antwerp Central Station');
SELECT changes();

INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (5, 3, 'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', 'Eiffel Tower');
SELECT changes();

INSERT INTO "PointsOfInterest" ("Id", "CityId", "Description", "Name")
VALUES (6, 3, 'The world''s largest museum.', 'The Louvre');
SELECT changes();
2024-04-01 15:26:24.525 +08:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-01 15:26:24.525 +08:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:26:24.526 +08:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-01 15:26:24.526 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240401072610_InitialDataSeed', '8.0.0');
2024-04-01 15:26:24.526 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240401072610_InitialDataSeed', '8.0.0');
2024-04-01 15:26:24.526 +08:00 [DBG] Committing transaction.
2024-04-01 15:26:24.527 +08:00 [DBG] Committed transaction.
2024-04-01 15:26:24.527 +08:00 [DBG] Disposing transaction.
2024-04-01 15:26:24.527 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 15:26:24.528 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:26:24.528 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 15:26:24.528 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 15:26:24.528 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 15:33:51.020 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 15:33:51.080 +08:00 [DBG] Hosting starting
2024-04-01 15:33:51.322 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 15:33:51.322 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 15:33:51.322 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 15:33:51.322 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 15:33:51.322 +08:00 [INF] Hosting environment: Development
2024-04-01 15:33:51.322 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 15:33:51.322 +08:00 [DBG] Hosting started
2024-04-01 16:32:52.801 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:32:52.855 +08:00 [DBG] Hosting starting
2024-04-01 16:32:52.996 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:32:52.996 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:32:52.996 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:32:52.996 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:32:52.996 +08:00 [INF] Hosting environment: Development
2024-04-01 16:32:52.996 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:32:52.997 +08:00 [DBG] Hosting started
2024-04-01 16:33:09.288 +08:00 [DBG] Connection id "0HN2I4PE70TLV" received FIN.
2024-04-01 16:33:09.294 +08:00 [DBG] Connection id "0HN2I4PE70TLV" accepted.
2024-04-01 16:33:09.295 +08:00 [DBG] Connection id "0HN2I4PE70TLV" started.
2024-04-01 16:33:09.297 +08:00 [DBG] Connection id "0HN2I4PE70TM0" accepted.
2024-04-01 16:33:09.297 +08:00 [DBG] Connection id "0HN2I4PE70TM0" started.
2024-04-01 16:33:09.307 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 16:33:09.316 +08:00 [DBG] Connection id "0HN2I4PE70TLV" stopped.
2024-04-01 16:33:09.318 +08:00 [DBG] Connection id "0HN2I4PE70TLV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 16:33:09.374 +08:00 [DBG] Connection 0HN2I4PE70TM0 established using the following protocol: "Tls12"
2024-04-01 16:33:09.397 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities - null null
2024-04-01 16:33:09.398 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:33:09.408 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:33:09.418 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-04-01 16:33:09.419 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-04-01 16:33:09.419 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:33:09.421 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:33:09.428 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:33:09.429 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:33:09.429 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:33:09.429 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:33:09.429 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:33:09.429 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:33:09.430 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:33:09.471 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:33:09.477 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:33:09.664 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:33:09.672 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-04-01 16:33:09.735 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 16:33:09.744 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:33:09.747 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 16:33:09.748 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:33:09.753 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:33:09.754 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:33:09.755 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:33:09.756 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-01 16:33:09.757 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:33:09.762 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:33:09.768 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:33:09.773 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:33:09.773 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:33:09.774 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:33:09.776 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 12ms reading results.
2024-04-01 16:33:09.777 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:33:09.777 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:33:09.778 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:33:09.778 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:33:09.779 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 16:33:09.779 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 16:33:09.779 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:33:09.779 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 16:33:09.810 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 379.8096ms
2024-04-01 16:33:09.810 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:33:09.810 +08:00 [DBG] Connection id "0HN2I4PE70TM0" completed keep alive response.
2024-04-01 16:33:09.811 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:33:09.812 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:33:09.812 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:33:09.812 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities - 200 247 application/json; charset=utf-8 418.16ms
2024-04-01 16:34:50.344 +08:00 [INF] Application is shutting down...
2024-04-01 16:34:50.344 +08:00 [DBG] Hosting stopping
2024-04-01 16:34:50.348 +08:00 [DBG] Connection id "0HN2I4PE70TM0" disconnecting.
2024-04-01 16:34:50.349 +08:00 [DBG] Connection id "0HN2I4PE70TM0" stopped.
2024-04-01 16:34:50.349 +08:00 [DBG] Connection id "0HN2I4PE70TM0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 16:34:50.350 +08:00 [DBG] Hosting stopped
2024-04-01 16:35:12.965 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:35:13.006 +08:00 [DBG] Hosting starting
2024-04-01 16:35:13.154 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:35:13.154 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:35:13.154 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:35:13.154 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:35:13.154 +08:00 [INF] Hosting environment: Development
2024-04-01 16:35:13.154 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:35:13.154 +08:00 [DBG] Hosting started
2024-04-01 16:35:17.484 +08:00 [DBG] Connection id "0HN2I4QKDJ8GL" received FIN.
2024-04-01 16:35:17.488 +08:00 [DBG] Connection id "0HN2I4QKDJ8GL" accepted.
2024-04-01 16:35:17.489 +08:00 [DBG] Connection id "0HN2I4QKDJ8GL" started.
2024-04-01 16:35:17.490 +08:00 [DBG] Connection id "0HN2I4QKDJ8GM" accepted.
2024-04-01 16:35:17.491 +08:00 [DBG] Connection id "0HN2I4QKDJ8GM" started.
2024-04-01 16:35:17.500 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 16:35:17.512 +08:00 [DBG] Connection id "0HN2I4QKDJ8GL" stopped.
2024-04-01 16:35:17.514 +08:00 [DBG] Connection id "0HN2I4QKDJ8GL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 16:35:17.550 +08:00 [DBG] Connection 0HN2I4QKDJ8GM established using the following protocol: "Tls12"
2024-04-01 16:35:17.568 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities - null null
2024-04-01 16:35:17.569 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:35:17.578 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:35:17.587 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-04-01 16:35:17.588 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-04-01 16:35:17.588 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:35:17.589 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:35:17.596 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:35:17.596 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:35:17.597 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:35:17.597 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:35:17.597 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:35:17.597 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:35:17.597 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:35:17.637 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:35:17.644 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:35:17.826 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:35:17.833 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-04-01 16:35:17.892 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 16:35:17.900 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:35:17.903 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 16:35:17.904 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:35:17.909 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:35:17.910 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:35:17.912 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:35:17.912 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 16:35:17.914 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:35:17.919 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:35:17.925 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:35:17.931 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:35:17.931 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:35:17.932 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:35:17.934 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 13ms reading results.
2024-04-01 16:35:17.935 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:35:17.935 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:35:17.936 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:35:17.937 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:35:17.937 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 16:35:17.937 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 16:35:17.937 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:35:17.937 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 16:35:17.969 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 370.9445ms
2024-04-01 16:35:17.969 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:35:17.969 +08:00 [DBG] Connection id "0HN2I4QKDJ8GM" completed keep alive response.
2024-04-01 16:35:17.970 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:35:17.971 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:35:17.971 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:35:17.971 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities - 200 247 application/json; charset=utf-8 405.4761ms
2024-04-01 16:35:21.398 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/2 - null null
2024-04-01 16:35:21.399 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:35:21.400 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2024-04-01 16:35:21.400 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/2'
2024-04-01 16:35:21.400 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:35:21.400 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:35:21.403 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] GetCity(Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:35:21.403 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:35:21.404 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:35:21.404 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:35:21.404 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:35:21.404 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:35:21.404 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:35:21.404 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:35:21.407 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 16:35:21.408 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 16:35:21.408 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:35:21.408 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:35:21.408 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 16:35:21.408 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 16:35:21.413 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:35:21.417 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 16:35:21.421 +08:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2024-04-01 16:35:21.447 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 16:35:21.449 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:35:21.449 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 16:35:21.449 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:35:21.449 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:35:21.449 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:35:21.450 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:35:21.450 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:35:21.451 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:35:21.452 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:35:21.452 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:35:21.457 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:35:21.458 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:35:21.458 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:35:21.458 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 6ms reading results.
2024-04-01 16:35:21.459 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:35:21.459 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:35:21.459 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:35:21.459 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:35:21.459 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 16:35:21.459 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 16:35:21.459 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:35:21.459 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Entities.City'.
2024-04-01 16:35:21.464 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 59.7017ms
2024-04-01 16:35:21.464 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:35:21.464 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'city' with type 'CityInfo.API.Entities.City'. Path 'pointsOfInterest[0]'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-01 16:35:21.472 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:35:21.472 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:35:21.472 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
2024-04-01 16:35:21.472 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 16:35:21.476 +08:00 [DBG] Connection id "0HN2I4QKDJ8GM" completed keep alive response.
2024-04-01 16:35:21.476 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:35:21.476 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:35:21.476 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:35:21.477 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/2 - 500 353 application/problem+json; charset=utf-8 78.8233ms
2024-04-01 16:35:29.649 +08:00 [INF] Application is shutting down...
2024-04-01 16:35:29.651 +08:00 [DBG] Hosting stopping
2024-04-01 16:35:29.656 +08:00 [DBG] Connection id "0HN2I4QKDJ8GM" disconnecting.
2024-04-01 16:35:29.657 +08:00 [DBG] Connection id "0HN2I4QKDJ8GM" stopped.
2024-04-01 16:35:29.657 +08:00 [DBG] Connection id "0HN2I4QKDJ8GM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 16:35:29.659 +08:00 [DBG] Hosting stopped
2024-04-01 16:35:32.344 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:35:32.402 +08:00 [DBG] Hosting starting
2024-04-01 16:35:32.616 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:35:32.616 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:35:32.616 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:35:32.616 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:35:32.616 +08:00 [INF] Hosting environment: Development
2024-04-01 16:35:32.616 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:35:32.616 +08:00 [DBG] Hosting started
2024-04-01 16:35:34.593 +08:00 [DBG] Connection id "0HN2I4QPGOO7R" received FIN.
2024-04-01 16:35:34.596 +08:00 [DBG] Connection id "0HN2I4QPGOO7R" accepted.
2024-04-01 16:35:34.597 +08:00 [DBG] Connection id "0HN2I4QPGOO7R" started.
2024-04-01 16:35:34.598 +08:00 [DBG] Connection id "0HN2I4QPGOO7S" accepted.
2024-04-01 16:35:34.598 +08:00 [DBG] Connection id "0HN2I4QPGOO7S" started.
2024-04-01 16:35:34.605 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 16:35:34.620 +08:00 [DBG] Connection id "0HN2I4QPGOO7R" stopped.
2024-04-01 16:35:34.621 +08:00 [DBG] Connection id "0HN2I4QPGOO7R" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 16:35:34.649 +08:00 [DBG] Connection 0HN2I4QPGOO7S established using the following protocol: "Tls12"
2024-04-01 16:35:34.663 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/2 - null null
2024-04-01 16:35:34.663 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:35:34.670 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:35:34.677 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2024-04-01 16:35:34.678 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/2'
2024-04-01 16:35:34.679 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:35:34.679 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:35:34.687 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] GetCity(Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:35:34.687 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:35:34.687 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:35:34.687 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:35:34.687 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:35:34.687 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:35:34.688 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:35:34.736 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:35:34.743 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:35:34.748 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 16:35:34.749 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 16:35:34.749 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:35:34.749 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:35:34.749 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 16:35:34.750 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 16:35:57.791 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:35:58.308 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 16:35:58.331 +08:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2024-04-01 16:35:58.407 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 16:35:58.420 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:35:58.423 +08:00 [DBG] Created DbConnection. (3ms).
2024-04-01 16:35:58.424 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:35:58.431 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:35:58.432 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:35:58.434 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:35:58.435 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 16:35:58.437 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:35:58.444 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:35:58.450 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:35:58.458 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:35:58.459 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:35:58.460 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:35:58.462 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 16ms reading results.
2024-04-01 16:35:58.463 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:35:58.464 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:42:19.033 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:42:19.082 +08:00 [DBG] Hosting starting
2024-04-01 16:42:19.221 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:42:19.221 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:42:19.221 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:42:19.221 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:42:19.221 +08:00 [INF] Hosting environment: Development
2024-04-01 16:42:19.221 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:42:19.221 +08:00 [DBG] Hosting started
2024-04-01 16:42:19.992 +08:00 [INF] Application is shutting down...
2024-04-01 16:42:19.993 +08:00 [DBG] Hosting stopping
2024-04-01 16:42:19.996 +08:00 [DBG] Hosting stopped
2024-04-01 16:42:23.729 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:42:23.768 +08:00 [DBG] Hosting starting
2024-04-01 16:42:23.984 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:42:23.984 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:42:23.984 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:42:23.984 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:42:23.984 +08:00 [INF] Hosting environment: Development
2024-04-01 16:42:23.984 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:42:23.984 +08:00 [DBG] Hosting started
2024-04-01 16:42:31.248 +08:00 [DBG] Connection id "0HN2I4ULM9HML" received FIN.
2024-04-01 16:42:31.255 +08:00 [DBG] Connection id "0HN2I4ULM9HML" accepted.
2024-04-01 16:42:31.256 +08:00 [DBG] Connection id "0HN2I4ULM9HML" started.
2024-04-01 16:42:31.259 +08:00 [DBG] Connection id "0HN2I4ULM9HMM" accepted.
2024-04-01 16:42:31.259 +08:00 [DBG] Connection id "0HN2I4ULM9HMM" started.
2024-04-01 16:42:31.274 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 16:42:31.296 +08:00 [DBG] Connection id "0HN2I4ULM9HML" stopped.
2024-04-01 16:42:31.298 +08:00 [DBG] Connection id "0HN2I4ULM9HML" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 16:42:31.328 +08:00 [DBG] Connection 0HN2I4ULM9HMM established using the following protocol: "Tls12"
2024-04-01 16:42:31.338 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities - null null
2024-04-01 16:42:31.339 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:42:31.348 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:42:31.359 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-04-01 16:42:31.360 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-04-01 16:42:31.360 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:42:31.361 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:42:31.367 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:42:31.368 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:42:31.368 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:42:31.368 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:42:31.368 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:42:31.368 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:42:31.368 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:42:31.416 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:42:31.466 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:42:47.568 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:42:47.578 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-04-01 16:42:47.653 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 16:42:47.663 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:42:47.666 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 16:42:47.667 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:42:47.672 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:42:47.673 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:42:47.675 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:42:47.675 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 16:42:47.677 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:42:47.682 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:42:47.688 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:42:47.692 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:42:47.692 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:42:47.694 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:42:47.695 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 11ms reading results.
2024-04-01 16:42:47.696 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:42:47.697 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:44:04.194 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:44:04.234 +08:00 [DBG] Hosting starting
2024-04-01 16:44:04.414 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:44:04.414 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:44:04.414 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:44:04.414 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:44:04.414 +08:00 [INF] Hosting environment: Development
2024-04-01 16:44:04.414 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:44:04.414 +08:00 [DBG] Hosting started
2024-04-01 16:44:16.100 +08:00 [DBG] Connection id "0HN2I4VKU81SL" received FIN.
2024-04-01 16:44:16.108 +08:00 [DBG] Connection id "0HN2I4VKU81SL" accepted.
2024-04-01 16:44:16.109 +08:00 [DBG] Connection id "0HN2I4VKU81SL" started.
2024-04-01 16:44:16.111 +08:00 [DBG] Connection id "0HN2I4VKU81SM" accepted.
2024-04-01 16:44:16.112 +08:00 [DBG] Connection id "0HN2I4VKU81SM" started.
2024-04-01 16:44:16.130 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 16:44:16.152 +08:00 [DBG] Connection id "0HN2I4VKU81SL" stopped.
2024-04-01 16:44:16.154 +08:00 [DBG] Connection id "0HN2I4VKU81SL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 16:44:16.179 +08:00 [DBG] Connection 0HN2I4VKU81SM established using the following protocol: "Tls12"
2024-04-01 16:44:16.188 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities - null null
2024-04-01 16:44:16.188 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:44:16.195 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:44:16.202 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-04-01 16:44:16.203 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-04-01 16:44:16.203 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:44:16.204 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:44:16.209 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:44:16.209 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:44:16.209 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:44:16.209 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:44:16.209 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:44:16.209 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:44:16.210 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:44:16.256 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:44:16.295 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:44:16.500 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:44:16.509 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-04-01 16:44:16.586 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 16:44:16.595 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:44:16.599 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 16:44:16.600 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:44:16.606 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:16.607 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:44:16.609 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:44:16.609 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 16:44:16.611 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:44:16.617 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:44:16.623 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:16.627 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:16.627 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:16.628 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:16.630 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 11ms reading results.
2024-04-01 16:44:16.631 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:16.632 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:44:16.637 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:44:16.637 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:44:16.638 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 16:44:16.638 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 16:44:16.638 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:44:16.638 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 16:44:16.683 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 472.8913ms
2024-04-01 16:44:16.684 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:44:16.684 +08:00 [DBG] Connection id "0HN2I4VKU81SM" completed keep alive response.
2024-04-01 16:44:16.684 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:44:16.686 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:44:16.686 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:44:16.686 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities - 200 247 application/json; charset=utf-8 500.2879ms
2024-04-01 16:44:19.508 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/2 - null null
2024-04-01 16:44:19.510 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:44:19.511 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2024-04-01 16:44:19.511 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/2'
2024-04-01 16:44:19.511 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:44:19.511 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:44:19.515 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] GetCity(Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:44:19.515 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:44:19.515 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:44:19.515 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:44:19.515 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:44:19.515 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:44:19.515 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:44:19.516 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:44:19.517 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 16:44:19.517 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 16:44:19.518 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:44:19.518 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:44:19.518 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 16:44:19.519 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 16:44:19.524 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:44:19.528 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 16:44:19.533 +08:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2024-04-01 16:44:19.561 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 16:44:19.564 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:44:19.564 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 16:44:19.564 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:44:19.564 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:19.564 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:44:19.564 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:44:19.565 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:44:19.566 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:44:19.568 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:44:19.568 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:19.573 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:19.574 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:19.574 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:19.574 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 5ms reading results.
2024-04-01 16:44:19.574 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:19.574 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:44:20.075 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 559.4803ms
2024-04-01 16:44:20.075 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:44:20.076 +08:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
City -> CityDto
CityInfo.API.Entities.City -> CityInfo.API.Models.CityDto
   at lambda_method106(Closure, Object, CityDto, ResolutionContext)
   at CityInfo.API.Controllers.CitiesController.GetCity(Int32 id) in /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/Controllers/CitiesController.cs:line 35
   at lambda_method64(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-01 16:44:20.088 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:44:20.088 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:44:20.088 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
2024-04-01 16:44:20.088 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 16:44:20.094 +08:00 [DBG] Connection id "0HN2I4VKU81SM" completed keep alive response.
2024-04-01 16:44:20.094 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:44:20.094 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:44:20.094 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:44:20.094 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/2 - 500 378 application/problem+json; charset=utf-8 585.8958ms
2024-04-01 16:44:46.665 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:44:46.706 +08:00 [DBG] Hosting starting
2024-04-01 16:44:46.890 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:44:46.890 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:44:46.890 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:44:46.890 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:44:46.891 +08:00 [INF] Hosting environment: Development
2024-04-01 16:44:46.891 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:44:46.891 +08:00 [DBG] Hosting started
2024-04-01 16:44:50.761 +08:00 [DBG] Connection id "0HN2I4VV8PI6B" received FIN.
2024-04-01 16:44:50.768 +08:00 [DBG] Connection id "0HN2I4VV8PI6B" accepted.
2024-04-01 16:44:50.769 +08:00 [DBG] Connection id "0HN2I4VV8PI6B" started.
2024-04-01 16:44:50.771 +08:00 [DBG] Connection id "0HN2I4VV8PI6C" accepted.
2024-04-01 16:44:50.772 +08:00 [DBG] Connection id "0HN2I4VV8PI6C" started.
2024-04-01 16:44:50.786 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 16:44:50.806 +08:00 [DBG] Connection id "0HN2I4VV8PI6B" stopped.
2024-04-01 16:44:50.808 +08:00 [DBG] Connection id "0HN2I4VV8PI6B" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 16:44:50.841 +08:00 [DBG] Connection 0HN2I4VV8PI6C established using the following protocol: "Tls12"
2024-04-01 16:44:50.852 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities - null null
2024-04-01 16:44:50.853 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:44:50.861 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:44:50.870 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-04-01 16:44:50.871 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-04-01 16:44:50.871 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:44:50.872 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:44:50.878 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:44:50.878 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:44:50.878 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:44:50.878 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:44:50.878 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:44:50.878 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:44:50.879 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:44:50.924 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:44:50.970 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:44:51.181 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:44:51.190 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-04-01 16:44:51.269 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 16:44:51.279 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:44:51.282 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 16:44:51.283 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:44:51.287 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:51.288 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:44:51.290 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:44:51.290 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 16:44:51.292 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:44:51.298 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:44:51.305 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:51.309 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:51.309 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:51.310 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:51.312 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 11ms reading results.
2024-04-01 16:44:51.313 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:51.314 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:44:51.318 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:44:51.319 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:44:51.319 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 16:44:51.319 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 16:44:51.319 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:44:51.319 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 16:44:51.364 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 484.8506ms
2024-04-01 16:44:51.365 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:44:51.365 +08:00 [DBG] Connection id "0HN2I4VV8PI6C" completed keep alive response.
2024-04-01 16:44:51.366 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:44:51.367 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:44:51.368 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:44:51.368 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities - 200 247 application/json; charset=utf-8 518.2759ms
2024-04-01 16:44:53.374 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/2 - null null
2024-04-01 16:44:53.378 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:44:53.379 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2024-04-01 16:44:53.379 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/2'
2024-04-01 16:44:53.380 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:44:53.380 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:44:53.392 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] GetCity(Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:44:53.392 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:44:53.392 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:44:53.392 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:44:53.392 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:44:53.393 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:44:53.393 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:44:53.394 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:44:53.398 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 16:44:53.399 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 16:44:53.399 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:44:53.399 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:44:53.399 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 16:44:53.400 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 16:44:53.408 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:44:53.414 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 16:44:53.420 +08:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2024-04-01 16:44:53.459 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 16:44:53.462 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:44:53.462 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 16:44:53.462 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:44:53.462 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:53.463 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:44:53.463 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:44:53.463 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:44:53.464 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:44:53.466 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:44:53.466 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:53.472 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:53.473 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:44:53.473 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:53.473 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 7ms reading results.
2024-04-01 16:44:53.473 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:44:53.473 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:44:53.992 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 599.1988ms
2024-04-01 16:44:53.992 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:44:53.993 +08:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
City -> CityDto
CityInfo.API.Entities.City -> CityInfo.API.Models.CityDto

Type Map configuration:
City -> CityDto
CityInfo.API.Entities.City -> CityInfo.API.Models.CityDto

Destination Member:
PointsOfInterest

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
PointOfInterest -> PointOfInterestDto
CityInfo.API.Entities.PointOfInterest -> CityInfo.API.Models.PointOfInterestDto
   at lambda_method107(Closure, PointOfInterest, PointOfInterestDto, ResolutionContext)
   at lambda_method106(Closure, Object, CityDto, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method106(Closure, Object, CityDto, ResolutionContext)
   at CityInfo.API.Controllers.CitiesController.GetCity(Int32 id) in /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/Controllers/CitiesController.cs:line 35
   at lambda_method64(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-01 16:44:54.005 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:44:54.005 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:44:54.005 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
2024-04-01 16:44:54.005 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 16:44:54.011 +08:00 [DBG] Connection id "0HN2I4VV8PI6C" completed keep alive response.
2024-04-01 16:44:54.011 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:44:54.011 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:44:54.011 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:44:54.011 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/2 - 500 490 application/problem+json; charset=utf-8 637.5665ms
2024-04-01 16:45:15.123 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:45:15.161 +08:00 [DBG] Hosting starting
2024-04-01 16:45:15.401 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:45:15.401 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:45:15.401 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:45:15.401 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:45:15.401 +08:00 [INF] Hosting environment: Development
2024-04-01 16:45:15.401 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:45:15.402 +08:00 [DBG] Hosting started
2024-04-01 16:45:18.378 +08:00 [DBG] Connection id "0HN2I507G5JE7" received FIN.
2024-04-01 16:45:18.384 +08:00 [DBG] Connection id "0HN2I507G5JE7" accepted.
2024-04-01 16:45:18.385 +08:00 [DBG] Connection id "0HN2I507G5JE7" started.
2024-04-01 16:45:18.387 +08:00 [DBG] Connection id "0HN2I507G5JE8" accepted.
2024-04-01 16:45:18.387 +08:00 [DBG] Connection id "0HN2I507G5JE8" started.
2024-04-01 16:45:18.404 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 16:45:18.423 +08:00 [DBG] Connection id "0HN2I507G5JE7" stopped.
2024-04-01 16:45:18.424 +08:00 [DBG] Connection id "0HN2I507G5JE7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 16:45:18.452 +08:00 [DBG] Connection 0HN2I507G5JE8 established using the following protocol: "Tls12"
2024-04-01 16:45:18.463 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/2 - null null
2024-04-01 16:45:18.464 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:45:18.473 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:45:18.482 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2024-04-01 16:45:18.483 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/2'
2024-04-01 16:45:18.483 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:45:18.484 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:45:18.492 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] GetCity(Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:45:18.492 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:45:18.492 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:45:18.492 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:45:18.492 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:45:18.492 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:45:18.493 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:45:18.536 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:45:18.581 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:45:18.582 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 16:45:18.582 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 16:45:18.582 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:45:18.582 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:45:18.582 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 16:45:18.583 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 16:45:18.792 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:45:18.810 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 16:45:18.833 +08:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2024-04-01 16:45:18.912 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 16:45:18.924 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:45:18.927 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 16:45:18.928 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:45:18.931 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:45:18.932 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:45:18.934 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:45:18.935 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 16:45:18.937 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:45:18.943 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:45:18.950 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:45:18.960 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:45:18.960 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:45:18.962 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:45:18.964 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 18ms reading results.
2024-04-01 16:45:18.965 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:45:18.966 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:50:39.658 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:50:39.699 +08:00 [DBG] Hosting starting
2024-04-01 16:50:39.895 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:50:39.895 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:50:39.895 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:50:39.895 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:50:39.895 +08:00 [INF] Hosting environment: Development
2024-04-01 16:50:39.895 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:50:39.895 +08:00 [DBG] Hosting started
2024-04-01 16:51:19.720 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:51:19.754 +08:00 [DBG] Hosting starting
2024-04-01 16:51:19.888 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:51:19.888 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:51:19.888 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:51:19.888 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:51:19.888 +08:00 [INF] Hosting environment: Development
2024-04-01 16:51:19.888 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:51:19.888 +08:00 [DBG] Hosting started
2024-04-01 16:51:24.244 +08:00 [DBG] Connection id "0HN2I53KHB37N" received FIN.
2024-04-01 16:51:24.250 +08:00 [DBG] Connection id "0HN2I53KHB37N" accepted.
2024-04-01 16:51:24.251 +08:00 [DBG] Connection id "0HN2I53KHB37N" started.
2024-04-01 16:51:24.252 +08:00 [DBG] Connection id "0HN2I53KHB37O" accepted.
2024-04-01 16:51:24.253 +08:00 [DBG] Connection id "0HN2I53KHB37O" started.
2024-04-01 16:51:24.262 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 16:51:24.272 +08:00 [DBG] Connection id "0HN2I53KHB37N" stopped.
2024-04-01 16:51:24.274 +08:00 [DBG] Connection id "0HN2I53KHB37N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 16:51:24.319 +08:00 [DBG] Connection 0HN2I53KHB37O established using the following protocol: "Tls12"
2024-04-01 16:51:24.332 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities - null null
2024-04-01 16:51:24.333 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:51:24.341 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:51:24.350 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-04-01 16:51:24.351 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-04-01 16:51:24.351 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:51:24.352 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:51:24.360 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:51:24.360 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:51:24.360 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:51:24.360 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:51:24.360 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:51:24.360 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:51:24.361 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:51:24.399 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:51:24.446 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:51:24.665 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:51:24.673 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-04-01 16:51:24.735 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 16:51:24.744 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:51:24.747 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 16:51:24.748 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:51:24.753 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:51:24.755 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:51:24.756 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:51:24.757 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 16:51:24.758 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:51:24.764 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 16:51:24.770 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:51:24.775 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:51:24.775 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:51:24.777 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:51:24.779 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 12ms reading results.
2024-04-01 16:51:24.780 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:51:24.781 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:51:24.785 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:51:24.785 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:51:24.786 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 16:51:24.786 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 16:51:24.786 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:51:24.786 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 16:51:24.827 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 465.4633ms
2024-04-01 16:51:24.828 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 16:51:24.828 +08:00 [DBG] Connection id "0HN2I53KHB37O" completed keep alive response.
2024-04-01 16:51:24.829 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:51:24.830 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:51:24.831 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:51:24.831 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities - 200 247 application/json; charset=utf-8 500.8719ms
2024-04-01 16:51:26.819 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/2 - null null
2024-04-01 16:51:26.821 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:51:26.823 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2024-04-01 16:51:26.823 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/2'
2024-04-01 16:51:26.823 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:51:26.824 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:51:26.836 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:51:26.836 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:51:26.837 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:51:26.837 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:51:26.837 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:51:26.837 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:51:26.837 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:51:26.839 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:51:26.842 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 16:51:26.843 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 16:51:26.844 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:51:26.844 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:51:26.844 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 16:51:26.845 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 16:51:26.845 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:51:26.845 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2024-04-01 16:51:26.845 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:51:26.846 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:51:26.846 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:51:26.846 +08:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:51:26.846 +08:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:51:26.855 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:51:26.859 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 16:51:26.870 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 16:51:26.874 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:51:26.875 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 16:51:26.875 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:51:26.875 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:51:26.875 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:51:26.875 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:51:26.876 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:51:26.877 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 16:51:26.878 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 16:51:26.879 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:51:26.879 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:51:26.879 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 16:51:26.879 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:51:26.879 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:51:26.880 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:51:26.880 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:51:26.880 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 16:51:26.880 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 16:51:26.880 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:51:26.880 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointsOfInterestDto'.
2024-04-01 16:51:26.881 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 43.3952ms
2024-04-01 16:51:26.881 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:51:26.881 +08:00 [DBG] Connection id "0HN2I53KHB37O" completed keep alive response.
2024-04-01 16:51:26.881 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:51:26.881 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:51:26.881 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:51:26.881 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/2 - 200 100 application/json; charset=utf-8 62.4395ms
2024-04-01 16:51:32.533 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/1 - null null
2024-04-01 16:51:32.533 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:51:32.534 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2024-04-01 16:51:32.534 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2024-04-01 16:51:32.534 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:51:32.534 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:51:32.534 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:51:32.534 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:51:32.534 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:51:32.534 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:51:32.534 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:51:32.534 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:51:32.534 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:51:32.535 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:51:32.535 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 16:51:32.535 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 16:51:32.535 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:51:32.535 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:51:32.535 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 16:51:32.535 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 16:51:32.535 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:51:32.535 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2024-04-01 16:51:32.535 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:51:32.535 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:51:32.536 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:51:32.536 +08:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:51:32.536 +08:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:51:32.551 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:51:32.552 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:51:32.552 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 16:51:32.553 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:51:32.553 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:51:32.553 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:51:32.553 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:51:32.553 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:51:32.553 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 16:51:32.553 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 16:51:32.553 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:51:32.553 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:51:32.553 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 16:51:32.553 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:51:32.553 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:51:32.553 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:51:32.553 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:51:32.553 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 16:51:32.554 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 16:51:32.554 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:51:32.554 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointsOfInterestDto'.
2024-04-01 16:51:32.554 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 19.6906ms
2024-04-01 16:51:32.554 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:51:32.554 +08:00 [DBG] Connection id "0HN2I53KHB37O" completed keep alive response.
2024-04-01 16:51:32.554 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:51:32.554 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:51:32.554 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:51:32.554 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/1 - 200 75 application/json; charset=utf-8 21.4863ms
2024-04-01 16:52:33.565 +08:00 [INF] Application is shutting down...
2024-04-01 16:52:33.566 +08:00 [DBG] Hosting stopping
2024-04-01 16:52:33.570 +08:00 [DBG] Connection id "0HN2I53KHB37O" disconnecting.
2024-04-01 16:52:33.571 +08:00 [DBG] Connection id "0HN2I53KHB37O" stopped.
2024-04-01 16:52:33.571 +08:00 [DBG] Connection id "0HN2I53KHB37O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 16:52:33.573 +08:00 [DBG] Hosting stopped
2024-04-01 16:52:38.194 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:52:38.233 +08:00 [DBG] Hosting starting
2024-04-01 16:52:38.405 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:52:38.405 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:52:38.405 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:52:38.405 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:52:38.406 +08:00 [INF] Hosting environment: Development
2024-04-01 16:52:38.406 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:52:38.406 +08:00 [DBG] Hosting started
2024-04-01 16:52:44.349 +08:00 [DBG] Connection id "0HN2I54CD95E3" accepted.
2024-04-01 16:52:44.355 +08:00 [DBG] Connection id "0HN2I54CD95E4" accepted.
2024-04-01 16:52:44.355 +08:00 [DBG] Connection id "0HN2I54CD95E3" started.
2024-04-01 16:52:44.355 +08:00 [DBG] Connection id "0HN2I54CD95E4" started.
2024-04-01 16:52:44.479 +08:00 [DBG] Connection 0HN2I54CD95E3 established using the following protocol: "Tls12"
2024-04-01 16:52:44.479 +08:00 [DBG] Connection 0HN2I54CD95E4 established using the following protocol: "Tls12"
2024-04-01 16:52:44.500 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-04-01 16:52:44.502 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:52:44.508 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:52:44.514 +08:00 [DBG] No candidates found for the request path '/'
2024-04-01 16:52:44.514 +08:00 [DBG] Request did not match any endpoints
2024-04-01 16:52:44.516 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 17.1743ms
2024-04-01 16:52:44.517 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-04-01 16:52:46.493 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-04-01 16:52:46.557 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 64.4595ms
2024-04-01 16:52:46.558 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - null null
2024-04-01 16:52:46.606 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - null null
2024-04-01 16:52:46.606 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - null null
2024-04-01 16:52:46.852 +08:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-04-01 16:52:46.852 +08:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-04-01 16:52:46.901 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - 200 144929 text/css 342.1605ms
2024-04-01 16:52:46.901 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - 200 312163 text/javascript 318.0307ms
2024-04-01 16:52:46.932 +08:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-04-01 16:52:46.932 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - 200 1061536 text/javascript 349.7026ms
2024-04-01 16:52:47.028 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-04-01 16:52:47.112 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 84.9403ms
2024-04-01 16:52:55.855 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/true - null null
2024-04-01 16:52:55.857 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:52:55.860 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/true'
2024-04-01 16:52:55.862 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}/{includePointsOfInterest}' is valid for the request path '/api/cities/1/true'
2024-04-01 16:52:55.862 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:52:55.863 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:52:55.877 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:52:55.877 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:52:55.877 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:52:55.878 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:52:55.878 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:52:55.878 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:52:55.878 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:52:55.938 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:52:55.980 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:52:55.981 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 16:52:55.982 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 16:52:55.982 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:52:55.982 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:52:55.982 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 16:52:55.983 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 16:52:55.983 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:52:55.983 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2024-04-01 16:52:55.984 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:52:55.984 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:52:55.984 +08:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:52:55.986 +08:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:52:56.205 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:52:56.223 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 16:52:56.245 +08:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2024-04-01 16:52:56.321 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 16:52:56.333 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:52:56.336 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 16:52:56.337 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:52:56.342 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:52:56.343 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:52:56.345 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:52:56.346 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 16:52:56.348 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:52:56.355 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:52:56.361 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:52:56.369 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:52:56.370 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:52:56.371 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:52:56.373 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 16ms reading results.
2024-04-01 16:52:56.374 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:52:56.375 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:52:56.828 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 949.2186ms
2024-04-01 16:52:56.829 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:52:56.829 +08:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
City -> CityDto
CityInfo.API.Entities.City -> CityInfo.API.Models.CityDto

Type Map configuration:
City -> CityDto
CityInfo.API.Entities.City -> CityInfo.API.Models.CityDto

Destination Member:
PointsOfInterest

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
PointOfInterest -> PointOfInterestDto
CityInfo.API.Entities.PointOfInterest -> CityInfo.API.Models.PointOfInterestDto
   at lambda_method93(Closure, PointOfInterest, PointOfInterestDto, ResolutionContext)
   at lambda_method92(Closure, Object, CityDto, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method92(Closure, Object, CityDto, ResolutionContext)
   at CityInfo.API.Controllers.CitiesController.GetCity(Int32 id, Boolean includePointsOfInterest) in /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/Controllers/CitiesController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-01 16:52:56.852 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:52:56.853 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:52:56.853 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
2024-04-01 16:52:56.853 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 16:52:56.889 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:52:56.890 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:52:56.891 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:52:56.891 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/true - 500 490 application/problem+json; charset=utf-8 1036.3505ms
2024-04-01 16:53:39.332 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:53:39.372 +08:00 [DBG] Hosting starting
2024-04-01 16:53:39.553 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:53:39.553 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:53:39.553 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:53:39.553 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:53:39.554 +08:00 [INF] Hosting environment: Development
2024-04-01 16:53:39.554 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:53:39.554 +08:00 [DBG] Hosting started
2024-04-01 16:53:45.094 +08:00 [DBG] Connection id "0HN2I54UGIVGJ" accepted.
2024-04-01 16:53:45.094 +08:00 [DBG] Connection id "0HN2I54UGIVGJ" started.
2024-04-01 16:53:45.159 +08:00 [DBG] Connection 0HN2I54UGIVGJ established using the following protocol: "Tls12"
2024-04-01 16:53:45.180 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-04-01 16:53:45.182 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:53:45.220 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 41.6919ms
2024-04-01 16:53:45.355 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-04-01 16:53:45.515 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 160.9556ms
2024-04-01 16:53:54.646 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1?includePointsOfInterest=false - null null
2024-04-01 16:53:54.651 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:53:54.677 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2024-04-01 16:53:54.679 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2024-04-01 16:53:54.679 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:53:54.681 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:53:54.695 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:53:54.697 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:53:54.697 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:53:54.697 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:53:54.697 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:53:54.697 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:53:54.698 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:53:54.760 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:53:54.809 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:53:54.811 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 16:53:54.811 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 16:53:54.811 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:53:54.812 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:53:54.812 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 16:53:54.812 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 16:53:54.812 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:53:54.813 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2024-04-01 16:53:54.813 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:53:54.813 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:53:54.813 +08:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:53:54.813 +08:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:53:55.024 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:53:55.042 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 16:53:55.114 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 16:53:55.126 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:53:55.129 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 16:53:55.130 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:53:55.136 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:53:55.137 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:53:55.139 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:53:55.140 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 16:53:55.142 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 16:53:55.149 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 16:53:55.155 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:53:55.160 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:53:55.162 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 11ms reading results.
2024-04-01 16:53:55.163 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:53:55.164 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:53:55.166 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:53:55.167 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:53:55.167 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 16:53:55.167 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 16:53:55.167 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:53:55.167 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointsOfInterestDto'.
2024-04-01 16:53:55.199 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 500.6242ms
2024-04-01 16:53:55.200 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:53:55.200 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:53:55.201 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:53:55.202 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:53:55.202 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1?includePointsOfInterest=false - 200 75 application/json; charset=utf-8 555.399ms
2024-04-01 16:54:10.579 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:54:10.619 +08:00 [DBG] Hosting starting
2024-04-01 16:54:10.848 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:54:10.848 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:54:10.849 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:54:10.849 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:54:10.849 +08:00 [INF] Hosting environment: Development
2024-04-01 16:54:10.849 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:54:10.849 +08:00 [DBG] Hosting started
2024-04-01 16:55:17.650 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:55:17.690 +08:00 [DBG] Hosting starting
2024-04-01 16:55:17.939 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:55:17.939 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:55:17.939 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:55:17.939 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:55:17.940 +08:00 [INF] Hosting environment: Development
2024-04-01 16:55:17.940 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:55:17.940 +08:00 [DBG] Hosting started
2024-04-01 16:55:22.191 +08:00 [DBG] Connection id "0HN2I55REIFM5" accepted.
2024-04-01 16:55:22.192 +08:00 [DBG] Connection id "0HN2I55REIFM5" started.
2024-04-01 16:55:22.267 +08:00 [DBG] Connection 0HN2I55REIFM5 established using the following protocol: "Tls12"
2024-04-01 16:55:22.283 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-04-01 16:55:22.284 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:55:22.325 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 43.0348ms
2024-04-01 16:55:22.471 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-04-01 16:55:22.555 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 84.7992ms
2024-04-01 16:55:26.176 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1?includePointsOfInterest=false - null null
2024-04-01 16:55:26.179 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:55:26.207 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2024-04-01 16:55:26.209 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2024-04-01 16:55:26.210 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:55:26.212 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:55:26.227 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:55:26.229 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:55:26.229 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:55:26.229 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:55:26.229 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:55:26.229 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:55:26.230 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:55:26.288 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:55:26.331 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:55:26.333 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 16:55:26.333 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 16:55:26.334 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:55:26.334 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:55:26.334 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 16:55:26.334 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 16:55:26.335 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:55:26.335 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2024-04-01 16:55:26.335 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:55:26.335 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:55:26.335 +08:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:55:26.335 +08:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:55:26.537 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:55:26.556 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 16:55:26.630 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 16:55:26.643 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:55:26.646 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 16:55:26.647 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:55:26.652 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:55:26.653 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:55:26.655 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:55:26.656 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 16:55:26.659 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 16:55:26.666 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 16:55:26.672 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:55:26.677 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:55:26.679 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 11ms reading results.
2024-04-01 16:55:26.680 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:55:26.681 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:55:26.684 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:55:26.684 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:55:26.684 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 16:55:26.685 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 16:55:26.685 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:55:26.685 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointsOfInterestDto'.
2024-04-01 16:55:26.727 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 496.3296ms
2024-04-01 16:55:26.727 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:55:26.727 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:55:26.729 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:55:26.729 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:55:26.729 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1?includePointsOfInterest=false - 200 75 application/json; charset=utf-8 552.9985ms
2024-04-01 16:55:31.440 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1?includePointsOfInterest=true - null null
2024-04-01 16:55:31.440 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:55:31.441 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2024-04-01 16:55:31.441 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2024-04-01 16:55:31.442 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:55:31.442 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:55:31.442 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 16:55:31.443 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:55:31.443 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:55:31.443 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:55:31.443 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:55:31.443 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:55:31.443 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:55:31.444 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 16:55:31.445 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 16:55:31.445 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 16:55:31.445 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:55:31.445 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 16:55:31.446 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 16:55:31.446 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 16:55:31.446 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:55:31.446 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2024-04-01 16:55:31.447 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:55:31.447 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:55:31.447 +08:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 16:55:31.448 +08:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 16:55:31.462 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:55:31.468 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 16:55:31.477 +08:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2024-04-01 16:55:31.516 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 16:55:31.517 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:55:31.517 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 16:55:31.517 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:55:31.517 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:55:31.517 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:55:31.517 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:55:31.517 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:55:31.517 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:55:31.517 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-04-01 16:55:31.518 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:55:31.524 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:55:31.525 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:55:31.525 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:55:31.525 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 7ms reading results.
2024-04-01 16:55:31.525 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:55:31.525 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:55:31.527 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:55:31.527 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 16:55:31.527 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 16:55:31.527 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 16:55:31.527 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:55:31.527 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2024-04-01 16:55:31.531 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 87.7337ms
2024-04-01 16:55:31.531 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 16:55:31.531 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:55:31.531 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:55:31.531 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:55:31.531 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1?includePointsOfInterest=true - 200 331 application/json; charset=utf-8 92.1033ms
2024-04-01 16:59:31.737 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 16:59:31.775 +08:00 [DBG] Hosting starting
2024-04-01 16:59:31.965 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 16:59:31.965 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 16:59:31.965 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 16:59:31.965 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 16:59:31.965 +08:00 [INF] Hosting environment: Development
2024-04-01 16:59:31.965 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 16:59:31.965 +08:00 [DBG] Hosting started
2024-04-01 16:59:36.761 +08:00 [DBG] Connection id "0HN2I587AB74V" accepted.
2024-04-01 16:59:36.762 +08:00 [DBG] Connection id "0HN2I587AB74V" started.
2024-04-01 16:59:36.841 +08:00 [DBG] Connection 0HN2I587AB74V established using the following protocol: "Tls12"
2024-04-01 16:59:36.871 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-04-01 16:59:36.873 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 16:59:36.919 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 49.4629ms
2024-04-01 16:59:37.051 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-04-01 16:59:37.103 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 52.8135ms
2024-04-01 16:59:42.173 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - null null
2024-04-01 16:59:42.176 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:59:42.204 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-04-01 16:59:42.206 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-04-01 16:59:42.207 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:42.209 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:42.224 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 16:59:42.225 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:59:42.226 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:59:42.226 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:59:42.226 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:59:42.226 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:59:42.227 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 16:59:42.286 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 16:59:42.330 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 16:59:42.332 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 16:59:42.332 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 16:59:42.332 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:42.332 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:42.332 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 16:59:42.333 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:42.537 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:59:42.547 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-04-01 16:59:42.623 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 16:59:42.635 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:59:42.638 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 16:59:42.639 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:59:42.644 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:42.645 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:59:42.646 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:59:42.647 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 16:59:42.650 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 16:59:42.656 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 16:59:42.662 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:59:42.667 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:59:42.668 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:42.670 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 11ms reading results.
2024-04-01 16:59:42.671 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:42.672 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:59:42.676 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:59:42.677 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-01 16:59:42.678 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-01 16:59:42.679 +08:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2024-04-01 16:59:42.679 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:59:42.679 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 16:59:42.679 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-01 16:59:42.681 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 453.4243ms
2024-04-01 16:59:42.681 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:42.681 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:59:42.683 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:59:42.683 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:59:42.683 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - 406 0 null 510.5674ms
2024-04-01 16:59:49.129 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - null null
2024-04-01 16:59:49.130 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:59:49.130 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-04-01 16:59:49.131 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-04-01 16:59:49.131 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:49.132 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:49.132 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 16:59:49.133 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:59:49.133 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:59:49.133 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:59:49.133 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:59:49.133 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:59:49.133 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 16:59:49.135 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 16:59:49.136 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 16:59:49.136 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 16:59:49.136 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:49.137 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:49.137 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 16:59:49.137 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:49.149 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:59:49.153 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:59:49.153 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 16:59:49.153 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:59:49.153 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:49.153 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:59:49.154 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:59:49.154 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:59:49.154 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 16:59:49.155 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 16:59:49.155 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:59:49.155 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:59:49.156 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:49.156 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 16:59:49.156 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:49.156 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:59:49.157 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:59:49.158 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 16:59:49.158 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:59:49.158 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 16:59:49.222 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 88.9871ms
2024-04-01 16:59:49.222 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:49.223 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:59:49.223 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:59:49.223 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:59:49.223 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - 200 207 application/json; charset=utf-8 93.6127ms
2024-04-01 16:59:55.378 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/2/pointsofinterest - null null
2024-04-01 16:59:55.379 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:59:55.379 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-04-01 16:59:55.379 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-04-01 16:59:55.380 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:55.380 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:55.381 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 16:59:55.381 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:59:55.381 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:59:55.382 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:59:55.382 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:59:55.382 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:59:55.382 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 16:59:55.385 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 16:59:55.386 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 16:59:55.386 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 16:59:55.386 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:55.386 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:55.387 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 16:59:55.387 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:55.412 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:59:55.413 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:59:55.413 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 16:59:55.413 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:59:55.413 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:55.413 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:59:55.413 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:59:55.413 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:59:55.413 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 16:59:55.414 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 16:59:55.414 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:59:55.414 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:59:55.414 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:55.414 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 16:59:55.414 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:55.414 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:59:55.415 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:59:55.415 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 16:59:55.415 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:59:55.415 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 16:59:55.415 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 33.0726ms
2024-04-01 16:59:55.416 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:55.416 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:59:55.416 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:59:55.416 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:59:55.416 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/2/pointsofinterest - 200 238 application/json; charset=utf-8 64.2848ms
2024-04-01 16:59:58.410 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/3/pointsofinterest - null null
2024-04-01 16:59:58.410 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 16:59:58.410 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 16:59:58.411 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 16:59:58.411 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:58.411 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:58.411 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 16:59:58.411 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 16:59:58.411 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 16:59:58.411 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 16:59:58.411 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 16:59:58.411 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 16:59:58.412 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 16:59:58.413 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 16:59:58.413 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 16:59:58.413 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 16:59:58.414 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:58.414 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:58.414 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 16:59:58.414 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 16:59:58.416 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 16:59:58.417 +08:00 [DBG] Creating DbConnection.
2024-04-01 16:59:58.417 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 16:59:58.417 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:59:58.417 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:58.417 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 16:59:58.417 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:59:58.418 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 16:59:58.418 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 16:59:58.418 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 16:59:58.419 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:59:58.419 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 16:59:58.419 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:58.419 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 16:59:58.420 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 16:59:58.420 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:59:58.420 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 16:59:58.421 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 16:59:58.421 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 16:59:58.421 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 16:59:58.422 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 10.2066ms
2024-04-01 16:59:58.422 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 16:59:58.423 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 16:59:58.423 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 16:59:58.423 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 16:59:58.423 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/3/pointsofinterest - 200 209 application/json; charset=utf-8 37.5222ms
2024-04-01 17:00:01.339 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/45/pointsofinterest - null null
2024-04-01 17:00:01.341 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:00:01.341 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/45/pointsofinterest'
2024-04-01 17:00:01.342 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/45/pointsofinterest'
2024-04-01 17:00:01.342 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:00:01.344 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:00:01.344 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:00:01.344 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:00:01.344 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:00:01.344 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:00:01.345 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:00:01.345 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:00:01.345 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:00:01.345 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:00:01.345 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:00:01.346 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:00:01.346 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:00:01.346 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:00:01.346 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:00:01.346 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:00:01.347 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:00:01.347 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:00:01.347 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:00:01.348 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:00:01.348 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:00:01.348 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:00:01.348 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:00:01.348 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:00:01.348 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:00:01.348 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:00:01.348 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:00:01.348 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:00:01.348 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:00:01.348 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:00:01.349 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:00:01.349 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:00:01.349 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:00:01.349 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:00:01.349 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 4.3493ms
2024-04-01 17:00:01.349 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:00:01.349 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:00:01.349 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:00:01.349 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:00:01.349 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/45/pointsofinterest - 200 2 application/json; charset=utf-8 10.7615ms
2024-04-01 17:00:22.384 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/45/pointsofinterest - null null
2024-04-01 17:00:22.454 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:00:22.455 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/45/pointsofinterest'
2024-04-01 17:00:22.455 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/45/pointsofinterest'
2024-04-01 17:00:22.455 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:00:22.455 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:00:22.456 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:00:22.456 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:00:22.456 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:00:22.457 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:00:22.457 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:00:22.457 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:00:22.457 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:00:22.458 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:00:22.458 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:00:22.458 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:00:22.459 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:00:22.459 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:00:22.459 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:00:22.459 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:00:24.995 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:00:24.996 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:00:24.996 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:00:24.996 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:00:24.996 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:00:24.996 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:00:24.996 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:00:24.996 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:00:24.996 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:00:24.996 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:00:24.997 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:00:24.997 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:00:24.997 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:00:24.997 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:00:48.144 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:00:48.182 +08:00 [DBG] Hosting starting
2024-04-01 17:00:48.429 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:00:48.429 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:00:48.429 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:00:48.430 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:00:48.430 +08:00 [INF] Hosting environment: Development
2024-04-01 17:00:48.430 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:00:48.430 +08:00 [DBG] Hosting started
2024-04-01 17:00:51.589 +08:00 [DBG] Connection id "0HN2I58TJUS6D" accepted.
2024-04-01 17:00:51.590 +08:00 [DBG] Connection id "0HN2I58TJUS6D" started.
2024-04-01 17:00:51.642 +08:00 [DBG] Connection 0HN2I58TJUS6D established using the following protocol: "Tls12"
2024-04-01 17:00:51.671 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/45/pointsofinterest - null null
2024-04-01 17:00:51.673 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:00:51.682 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:00:51.691 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/45/pointsofinterest'
2024-04-01 17:00:51.692 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/45/pointsofinterest'
2024-04-01 17:00:51.692 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:00:51.693 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:00:51.704 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:00:51.705 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:00:51.705 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:00:51.705 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:00:51.705 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:00:51.705 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:00:51.705 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:00:51.757 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:00:51.798 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:00:51.799 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:00:51.799 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:00:51.799 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:00:51.799 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:00:51.799 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:00:51.800 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:00:54.230 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:00:54.241 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-04-01 17:00:54.320 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 17:00:54.331 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:00:54.335 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 17:00:54.336 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:00:54.342 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:00:54.344 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:00:54.345 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:00:54.346 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 17:00:54.349 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:00:54.355 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:00:54.357 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:00:54.359 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 1ms reading results.
2024-04-01 17:00:54.360 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:00:54.361 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:01:48.054 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:01:48.090 +08:00 [DBG] Hosting starting
2024-04-01 17:01:48.287 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:01:48.287 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:01:48.287 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:01:48.287 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:01:48.287 +08:00 [INF] Hosting environment: Development
2024-04-01 17:01:48.287 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:01:48.287 +08:00 [DBG] Hosting started
2024-04-01 17:01:50.091 +08:00 [DBG] Connection id "0HN2I59F1SGPV" accepted.
2024-04-01 17:01:50.092 +08:00 [DBG] Connection id "0HN2I59F1SGPV" started.
2024-04-01 17:01:50.148 +08:00 [DBG] Connection 0HN2I59F1SGPV established using the following protocol: "Tls12"
2024-04-01 17:01:50.162 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/45/pointsofinterest - null null
2024-04-01 17:01:50.163 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:01:50.169 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:01:50.176 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/45/pointsofinterest'
2024-04-01 17:01:50.176 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/45/pointsofinterest'
2024-04-01 17:01:50.177 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:01:50.177 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:01:50.184 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:01:50.185 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:01:50.185 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:01:50.185 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:01:50.185 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:01:50.185 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:01:50.185 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:01:50.236 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:01:50.279 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:01:50.280 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:01:50.281 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:01:50.281 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:01:50.281 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:01:50.281 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:01:50.282 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:01:52.470 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:01:52.483 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-04-01 17:01:52.570 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 17:01:52.583 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:01:52.586 +08:00 [DBG] Created DbConnection. (3ms).
2024-04-01 17:01:52.587 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:01:52.592 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:01:52.593 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:01:52.595 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:01:52.596 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 17:01:52.599 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:01:52.607 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:01:52.609 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:01:52.610 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 17:01:52.612 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:01:52.612 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:01:58.442 +08:00 [INF] City with id 45 wasn't found when accessing points of interest.
2024-04-01 17:01:58.446 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:01:58.448 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:01:58.449 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:01:58.449 +08:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-04-01 17:01:58.510 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 8324.0131ms
2024-04-01 17:01:58.510 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:01:58.511 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:01:58.513 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:01:58.513 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:01:58.513 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/45/pointsofinterest - 404 162 application/problem+json; charset=utf-8 8352.6666ms
2024-04-01 17:08:12.270 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:08:12.310 +08:00 [DBG] Hosting starting
2024-04-01 17:08:12.543 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:08:12.543 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:08:12.543 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:08:12.543 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:08:12.544 +08:00 [INF] Hosting environment: Development
2024-04-01 17:08:12.544 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:08:12.544 +08:00 [DBG] Hosting started
2024-04-01 17:08:14.851 +08:00 [DBG] Connection id "0HN2I5D1N7ORN" accepted.
2024-04-01 17:08:14.851 +08:00 [DBG] Connection id "0HN2I5D1N7ORN" started.
2024-04-01 17:08:14.911 +08:00 [DBG] Connection 0HN2I5D1N7ORN established using the following protocol: "Tls12"
2024-04-01 17:08:14.926 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-04-01 17:08:14.927 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:08:14.966 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 41.7441ms
2024-04-01 17:08:15.101 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-04-01 17:08:15.148 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 47.1838ms
2024-04-01 17:08:20.114 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - null null
2024-04-01 17:08:20.115 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:08:20.125 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:08:20.126 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:08:20.126 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:08:20.127 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:08:20.135 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:08:20.136 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:08:20.136 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:08:20.136 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:08:20.137 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:08:20.137 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:08:20.137 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:08:20.193 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:08:20.235 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:08:20.236 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:08:20.237 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:08:20.237 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:08:20.237 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:08:20.237 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:08:20.238 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:08:28.225 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:08:28.263 +08:00 [DBG] Hosting starting
2024-04-01 17:08:28.470 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:08:28.470 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:08:28.471 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:08:28.471 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:08:28.471 +08:00 [INF] Hosting environment: Development
2024-04-01 17:08:28.471 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:08:28.471 +08:00 [DBG] Hosting started
2024-04-01 17:08:30.866 +08:00 [DBG] Connection id "0HN2I5D6FV6IJ" accepted.
2024-04-01 17:08:30.866 +08:00 [DBG] Connection id "0HN2I5D6FV6IJ" started.
2024-04-01 17:08:30.923 +08:00 [DBG] Connection 0HN2I5D6FV6IJ established using the following protocol: "Tls12"
2024-04-01 17:08:30.936 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-04-01 17:08:30.937 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:08:30.973 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 37.6778ms
2024-04-01 17:08:31.055 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-04-01 17:08:31.119 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 64.8933ms
2024-04-01 17:08:38.730 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - null null
2024-04-01 17:08:38.734 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:08:38.759 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:08:38.761 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:08:38.762 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:08:38.763 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:08:38.777 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:08:38.779 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:08:38.779 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:08:38.779 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:08:38.779 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:08:38.779 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:08:38.780 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:08:38.836 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:08:38.879 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:08:38.880 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:08:38.881 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:08:38.881 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:08:38.881 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:08:38.881 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:08:38.881 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:08:41.298 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:08:41.308 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-04-01 17:08:41.371 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:08:41.384 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:08:41.390 +08:00 [DBG] Created DbConnection. (4ms).
2024-04-01 17:08:41.391 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:08:41.396 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:08:41.397 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:08:41.399 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:08:41.400 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 17:08:41.403 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:08:41.411 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:08:41.413 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:08:41.415 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 17:08:41.416 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:08:41.417 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:08:43.833 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-04-01 17:08:43.854 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 17:08:43.856 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:08:43.856 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:08:43.856 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:08:43.856 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:08:43.856 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:08:43.856 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:08:43.856 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:08:43.864 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:08:43.869 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:08:43.869 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:08:43.869 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 12ms reading results.
2024-04-01 17:08:43.869 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:08:43.870 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:08:51.149 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:08:51.150 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:08:51.150 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:08:51.151 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:08:51.197 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 12436.6207ms
2024-04-01 17:08:51.197 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:08:51.198 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:08:51.199 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:08:51.200 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:08:51.200 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - 200 207 application/json; charset=utf-8 12489.7644ms
2024-04-01 17:09:00.338 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/12/pointsofinterest - null null
2024-04-01 17:09:00.338 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:09:00.339 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/12/pointsofinterest'
2024-04-01 17:09:00.339 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/12/pointsofinterest'
2024-04-01 17:09:00.340 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:09:00.340 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:09:00.340 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:09:00.341 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:09:00.341 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:09:00.341 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:09:00.341 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:09:00.341 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:09:00.342 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:09:00.343 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:09:00.344 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:09:00.344 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:09:00.344 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:09:00.344 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:09:00.345 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:09:00.345 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:09:00.353 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:09:00.355 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:09:00.355 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:09:00.355 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:09:00.355 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:09:00.356 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:09:00.356 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:09:00.356 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:09:00.356 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:09:00.356 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:09:00.356 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:09:00.356 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:09:00.356 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:09:00.356 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:09:00.357 +08:00 [INF] City with id 12 wasn't found when accessing points of interest.
2024-04-01 17:09:00.357 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:09:00.358 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:09:00.358 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:09:00.358 +08:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-04-01 17:09:00.367 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 25.2156ms
2024-04-01 17:09:00.367 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:09:00.367 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:09:00.367 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:09:00.368 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:09:00.442 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/12/pointsofinterest - 404 162 application/problem+json; charset=utf-8 104.4339ms
2024-04-01 17:09:17.891 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/12/pointsofinterest - null null
2024-04-01 17:09:17.892 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:09:17.892 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/12/pointsofinterest'
2024-04-01 17:09:17.892 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/12/pointsofinterest'
2024-04-01 17:09:17.892 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:09:17.892 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:09:17.893 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:09:17.893 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:09:17.893 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:09:17.894 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:09:17.894 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:09:17.895 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:09:17.895 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:09:17.897 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:09:17.897 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:09:17.897 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:09:17.897 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:09:17.898 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:09:17.898 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:09:17.898 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:09:17.924 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:09:17.925 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:09:17.925 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:09:17.925 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:09:17.925 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:09:17.925 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:09:17.926 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:09:17.926 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:09:17.926 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:09:17.926 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:09:17.926 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:09:17.926 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:09:17.926 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:09:17.926 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:09:17.927 +08:00 [INF] City with id 12 wasn't found when accessing points of interest.
2024-04-01 17:09:17.927 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:09:17.927 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:09:17.927 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:09:17.927 +08:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-04-01 17:09:17.928 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 32.7371ms
2024-04-01 17:09:17.928 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:09:17.928 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:09:17.928 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:09:17.928 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:09:17.929 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/12/pointsofinterest - 404 162 application/problem+json; charset=utf-8 37.2152ms
2024-04-01 17:11:56.089 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:11:56.129 +08:00 [DBG] Hosting starting
2024-04-01 17:11:56.329 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:11:56.329 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:11:56.329 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:11:56.329 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:11:56.329 +08:00 [INF] Hosting environment: Development
2024-04-01 17:11:56.329 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:11:56.330 +08:00 [DBG] Hosting started
2024-04-01 17:11:58.154 +08:00 [DBG] Connection id "0HN2I5F48QI8J" accepted.
2024-04-01 17:11:58.154 +08:00 [DBG] Connection id "0HN2I5F48QI8J" started.
2024-04-01 17:11:58.209 +08:00 [DBG] Connection 0HN2I5F48QI8J established using the following protocol: "Tls12"
2024-04-01 17:11:58.223 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-04-01 17:11:58.224 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:11:58.263 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 41.2644ms
2024-04-01 17:11:58.357 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-04-01 17:11:58.404 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 47.8715ms
2024-04-01 17:12:03.975 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/{pointofinterestid} - null null
2024-04-01 17:12:03.979 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:12:04.007 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/{pointofinterestid}'
2024-04-01 17:12:04.009 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/{pointofinterestid}'
2024-04-01 17:12:04.009 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:12:04.011 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:12:04.025 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:12:04.026 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:12:04.026 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:12:04.027 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:12:04.027 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:12:04.027 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:12:04.027 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:12:04.086 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:12:04.135 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:12:04.136 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:12:04.136 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:12:04.137 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:12:04.137 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:12:04.137 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:12:04.137 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:12:04.138 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:12:04.138 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:12:04.139 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:12:04.139 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:12:04.139 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:12:04.139 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:12:04.139 +08:00 [DBG] The request has model state errors, returning an error response.
2024-04-01 17:12:04.140 +08:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-04-01 17:12:04.140 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:12:04.141 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:12:04.141 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-01 17:12:04.141 +08:00 [WRN] No output formatter was found for content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]' to write the response.
2024-04-01 17:12:04.141 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:12:04.141 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:12:04.141 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-01 17:12:04.143 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 114.6917ms
2024-04-01 17:12:04.143 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:12:04.143 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/{pointofinterestid} - 406 0 null 168.7894ms
2024-04-01 17:12:08.137 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/{pointofinterestid} - null null
2024-04-01 17:12:08.138 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:12:08.139 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/{pointofinterestid}'
2024-04-01 17:12:08.139 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/{pointofinterestid}'
2024-04-01 17:12:08.139 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:12:08.139 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:12:08.140 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:12:08.140 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:12:08.141 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:12:08.141 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:12:08.141 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:12:08.142 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:12:08.142 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:12:08.155 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:12:08.156 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:12:08.156 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:12:08.156 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:12:08.156 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:12:08.156 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:12:08.156 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:12:08.157 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:12:08.157 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:12:08.157 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:12:08.157 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:12:08.157 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:12:08.157 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:12:08.158 +08:00 [DBG] The request has model state errors, returning an error response.
2024-04-01 17:12:08.158 +08:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-04-01 17:12:08.158 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:12:08.159 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:12:08.160 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:12:08.161 +08:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-04-01 17:12:08.228 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 85.9787ms
2024-04-01 17:12:08.228 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:12:08.228 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/{pointofinterestid} - 400 273 application/problem+json; charset=utf-8 117.5357ms
2024-04-01 17:12:33.850 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:12:33.888 +08:00 [DBG] Hosting starting
2024-04-01 17:12:34.076 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:12:34.076 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:12:34.076 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:12:34.076 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:12:34.076 +08:00 [INF] Hosting environment: Development
2024-04-01 17:12:34.076 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:12:34.077 +08:00 [DBG] Hosting started
2024-04-01 17:12:37.456 +08:00 [DBG] Connection id "0HN2I5FFVKKLD" accepted.
2024-04-01 17:12:37.457 +08:00 [DBG] Connection id "0HN2I5FFVKKLD" started.
2024-04-01 17:12:37.527 +08:00 [DBG] Connection 0HN2I5FFVKKLD established using the following protocol: "Tls12"
2024-04-01 17:12:37.553 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/{pointofinterestid} - null null
2024-04-01 17:12:37.554 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:12:37.562 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:12:37.570 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/{pointofinterestid}'
2024-04-01 17:12:37.571 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/{pointofinterestid}'
2024-04-01 17:12:37.571 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:12:37.572 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:12:37.579 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:12:37.580 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:12:37.580 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:12:37.580 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:12:37.580 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:12:37.580 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:12:37.580 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:12:37.621 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:12:37.663 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:12:37.664 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:12:37.664 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:12:37.664 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:12:37.665 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:12:37.665 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:12:37.665 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:12:37.665 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:12:37.666 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:12:37.666 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:12:37.666 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:12:37.666 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:12:37.667 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:12:37.667 +08:00 [DBG] The request has model state errors, returning an error response.
2024-04-01 17:12:37.667 +08:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-04-01 17:12:37.667 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:12:37.668 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:12:37.668 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:12:37.668 +08:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-04-01 17:12:37.714 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 129.9268ms
2024-04-01 17:12:37.714 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:12:37.715 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/{pointofinterestid} - 400 273 application/problem+json; charset=utf-8 164.9937ms
2024-04-01 17:12:55.831 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:12:55.868 +08:00 [DBG] Hosting starting
2024-04-01 17:12:56.051 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:12:56.051 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:12:56.051 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:12:56.051 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:12:56.051 +08:00 [INF] Hosting environment: Development
2024-04-01 17:12:56.051 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:12:56.051 +08:00 [DBG] Hosting started
2024-04-01 17:12:57.149 +08:00 [DBG] Connection id "0HN2I5FLREEN3" accepted.
2024-04-01 17:12:57.150 +08:00 [DBG] Connection id "0HN2I5FLREEN3" started.
2024-04-01 17:12:57.205 +08:00 [DBG] Connection 0HN2I5FLREEN3 established using the following protocol: "Tls12"
2024-04-01 17:12:57.247 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-04-01 17:12:57.248 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:12:57.291 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 46.9457ms
2024-04-01 17:12:57.367 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-04-01 17:12:57.411 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.1542ms
2024-04-01 17:13:03.139 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/1 - null null
2024-04-01 17:13:03.142 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:13:03.170 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 17:13:03.173 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 17:13:03.173 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:03.175 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:03.190 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:13:03.191 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:13:03.192 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:13:03.192 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:13:03.192 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:13:03.192 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:13:03.193 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:13:03.242 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:13:03.284 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:13:03.285 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:13:03.285 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:13:03.286 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:03.286 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:03.286 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:13:03.286 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:03.286 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:13:03.286 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:13:03.287 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:03.287 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:03.287 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:13:03.287 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:07.725 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:13:07.736 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-04-01 17:13:07.800 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:13:07.812 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:13:07.815 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 17:13:07.816 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:07.821 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:07.822 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:13:07.824 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:07.825 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 17:13:07.828 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:13:07.834 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:13:07.837 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:07.838 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 17:13:07.839 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:07.840 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:07.841 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityid_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2024-04-01 17:13:07.853 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityid_0) && (p.Id == @__pointOfInterestId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:13:07.856 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:07.856 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:07.856 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:13:07.856 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:07.856 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:07.856 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:13:07.856 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:13:07.861 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:13:07.865 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:07.865 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 9ms reading results.
2024-04-01 17:13:07.865 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:07.865 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:07.868 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:13:07.868 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-01 17:13:07.869 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-01 17:13:07.869 +08:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2024-04-01 17:13:07.869 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:13:07.869 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:13:07.869 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-01 17:13:07.870 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 4677.406ms
2024-04-01 17:13:07.870 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:07.871 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:13:07.872 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:07.872 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:07.873 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/1 - 406 0 null 4733.7917ms
2024-04-01 17:13:13.341 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/1 - null null
2024-04-01 17:13:13.341 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:13:13.342 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 17:13:13.342 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 17:13:13.342 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:13.342 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:13.343 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:13:13.343 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:13:13.343 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:13:13.343 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:13:13.343 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:13:13.343 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:13:13.343 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:13:13.344 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:13:13.345 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:13:13.345 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:13:13.345 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:13.345 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:13.345 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:13:13.345 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:13.345 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:13:13.345 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:13:13.345 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:13.346 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:13.346 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:13:13.346 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:15.852 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:13:15.854 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:13:15.854 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:13:15.854 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:15.854 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:15.854 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:13:15.855 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:15.855 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:15.855 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:13:15.855 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:13:15.855 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:15.855 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:13:15.855 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:15.855 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:15.856 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:15.856 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:15.856 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:13:15.856 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:15.856 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:15.856 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:13:15.856 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:13:15.857 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:13:15.857 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:15.857 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:13:15.857 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:15.857 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:15.857 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:13:15.858 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:13:15.858 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:13:15.858 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2024-04-01 17:13:15.902 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 2558.3152ms
2024-04-01 17:13:15.902 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:15.902 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:13:15.902 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:15.902 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:15.902 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/1 - 200 96 application/json; charset=utf-8 2562.3195ms
2024-04-01 17:13:24.950 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/2 - null null
2024-04-01 17:13:24.951 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:13:24.951 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/2'
2024-04-01 17:13:24.951 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointsofinterest/2'
2024-04-01 17:13:24.951 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:24.951 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:24.951 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:13:24.951 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:13:24.951 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:13:24.951 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:13:24.951 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:13:24.951 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:13:24.951 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:13:24.952 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:13:24.952 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:13:24.952 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:13:24.953 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:24.953 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:24.953 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:13:24.953 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:24.953 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:13:24.953 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:13:24.953 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:24.953 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:24.953 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:13:24.953 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:24.963 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:13:24.964 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:13:24.964 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:13:24.964 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:24.964 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:24.964 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:13:24.964 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:24.964 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:24.964 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:13:24.964 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:13:24.964 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:24.964 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:13:24.964 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:24.964 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:24.965 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:24.965 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:24.965 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:13:24.965 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:24.965 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:24.965 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:13:24.965 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:13:24.965 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:13:24.965 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:24.965 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:13:24.965 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:24.965 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:24.965 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:13:24.966 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:13:24.966 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:13:24.966 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2024-04-01 17:13:24.966 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 14.4446ms
2024-04-01 17:13:24.966 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:24.966 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:13:24.966 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:24.966 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:24.966 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/2 - 200 108 application/json; charset=utf-8 37.7108ms
2024-04-01 17:13:26.997 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/22 - null null
2024-04-01 17:13:26.998 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:13:26.998 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/22'
2024-04-01 17:13:26.999 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointsofinterest/22'
2024-04-01 17:13:26.999 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:27.000 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:27.000 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:13:27.000 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:13:27.001 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:13:27.001 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:13:27.001 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:13:27.002 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:13:27.002 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:13:27.003 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:13:27.003 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:13:27.003 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:13:27.003 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:27.004 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:27.004 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:13:27.004 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:27.004 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:13:27.005 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:13:27.005 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:27.005 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:27.005 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:13:27.005 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:27.007 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:13:27.008 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:13:27.008 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:13:27.008 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:27.008 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:27.008 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:13:27.008 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:27.008 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:27.009 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:13:27.009 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:13:27.010 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:27.010 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:13:27.010 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:27.010 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:27.011 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:27.011 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:27.011 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:13:27.012 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:27.012 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:27.012 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:13:27.012 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:13:27.013 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:27.013 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:13:27.013 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:27.013 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:27.021 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:13:27.021 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:13:27.021 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:13:27.022 +08:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2024-04-01 17:13:27.022 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 19.9275ms
2024-04-01 17:13:27.022 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:27.022 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:13:27.022 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:27.022 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:27.022 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/22 - 204 null null 50.0572ms
2024-04-01 17:13:33.581 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/111/pointsofinterest/22 - null null
2024-04-01 17:13:33.582 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:13:33.582 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/111/pointsofinterest/22'
2024-04-01 17:13:33.583 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/111/pointsofinterest/22'
2024-04-01 17:13:33.583 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:33.583 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:33.583 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:13:33.584 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:13:33.584 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:13:33.584 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:13:33.584 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:13:33.584 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:13:33.585 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:13:33.585 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:13:33.585 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:13:33.585 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:13:33.585 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:33.586 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:33.586 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:13:33.586 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:13:33.586 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:13:33.587 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:13:33.587 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:33.587 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:33.587 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:13:33.588 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:13:33.589 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:13:33.590 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:13:33.590 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:13:33.590 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:33.590 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:33.591 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:13:33.591 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:33.591 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:13:33.591 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:13:33.592 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:13:33.592 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:33.592 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:13:33.592 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:13:33.592 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:33.593 +08:00 [INF] City with id 111 wasn't found when accessing points of interest.
2024-04-01 17:13:33.593 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:13:33.594 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:13:33.594 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:13:33.594 +08:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-04-01 17:13:33.610 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 25.0265ms
2024-04-01 17:13:33.610 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:13:33.610 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:13:33.610 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:13:33.610 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:13:33.611 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/111/pointsofinterest/22 - 404 162 application/problem+json; charset=utf-8 55.4613ms
2024-04-01 17:15:09.100 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:15:09.140 +08:00 [DBG] Hosting starting
2024-04-01 17:15:09.390 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:15:09.390 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:15:09.390 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:15:09.390 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:15:09.390 +08:00 [INF] Hosting environment: Development
2024-04-01 17:15:09.390 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:15:09.390 +08:00 [DBG] Hosting started
2024-04-01 17:15:13.377 +08:00 [DBG] Connection id "0HN2I5GUEJN59" accepted.
2024-04-01 17:15:13.378 +08:00 [DBG] Connection id "0HN2I5GUEJN59" started.
2024-04-01 17:15:13.461 +08:00 [DBG] Connection 0HN2I5GUEJN59 established using the following protocol: "Tls12"
2024-04-01 17:15:13.493 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-04-01 17:15:13.495 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:15:13.539 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 47.9004ms
2024-04-01 17:15:13.701 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-04-01 17:15:13.755 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 54.0156ms
2024-04-01 17:15:21.424 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/123/pointsofinterest/123 - null null
2024-04-01 17:15:21.426 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:15:21.437 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/123/pointsofinterest/123'
2024-04-01 17:15:21.439 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/123/pointsofinterest/123'
2024-04-01 17:15:21.439 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:15:21.440 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:15:21.449 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:15:21.450 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:15:21.450 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:15:21.450 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:15:21.450 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:15:21.450 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:15:21.451 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:15:21.502 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:15:21.544 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:15:21.545 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:15:21.546 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:15:21.548 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:15:21.548 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:15:21.548 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:15:21.549 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:15:21.550 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:15:21.550 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:15:21.550 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:15:21.550 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:15:21.550 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:15:21.550 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:15:21.763 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:15:21.772 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-04-01 17:15:21.833 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:15:21.845 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:15:21.849 +08:00 [DBG] Created DbConnection. (3ms).
2024-04-01 17:15:21.850 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:15:21.856 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:15:21.857 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:15:21.858 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:15:21.860 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 17:15:21.862 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:15:21.869 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:15:21.871 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:15:21.873 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 17:15:21.874 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:15:21.874 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:15:21.874 +08:00 [INF] City with id 123 wasn't found when accessing points of interest.
2024-04-01 17:15:21.875 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:15:21.876 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:15:21.876 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:15:21.876 +08:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-04-01 17:15:21.914 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 462.7592ms
2024-04-01 17:15:21.914 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:15:21.915 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:15:21.916 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:15:21.916 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:15:21.917 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/123/pointsofinterest/123 - 404 162 application/problem+json; charset=utf-8 492.5065ms
2024-04-01 17:16:17.796 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/123 - null null
2024-04-01 17:16:17.858 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:16:17.859 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/123'
2024-04-01 17:16:17.859 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointsofinterest/123'
2024-04-01 17:16:17.860 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:17.860 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:17.861 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:16:17.862 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:16:17.862 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:16:17.862 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:16:17.863 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:16:17.863 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:16:17.863 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:17.865 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:17.866 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:17.866 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:16:17.866 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:17.867 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:17.867 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:17.867 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:17.867 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:16:17.867 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:16:17.867 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:17.867 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:17.867 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:16:17.868 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:17.879 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:16:17.882 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:16:17.882 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:16:17.882 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:17.883 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:17.883 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:17.883 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:17.883 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:17.883 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:17.884 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:17.884 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:17.884 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:17.885 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:17.885 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:17.888 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityid_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2024-04-01 17:16:17.911 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityid_0) && (p.Id == @__pointOfInterestId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:16:17.915 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:17.916 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:17.916 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:17.916 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:17.916 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:17.916 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:16:17.916 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:16:17.916 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:17.916 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:17.916 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:17.916 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:17.917 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:16:17.917 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:16:17.917 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:16:17.917 +08:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-04-01 17:16:17.917 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 54.4547ms
2024-04-01 17:16:17.917 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:17.917 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:16:17.918 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:17.918 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:17.918 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/123 - 404 162 application/problem+json; charset=utf-8 126.8457ms
2024-04-01 17:16:20.799 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/1 - null null
2024-04-01 17:16:20.800 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:16:20.800 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 17:16:20.800 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 17:16:20.801 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:20.801 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:20.801 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:16:20.801 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:16:20.801 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:16:20.802 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:16:20.802 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:16:20.802 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:16:20.803 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:20.804 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:20.804 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:20.805 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:16:20.805 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:20.805 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:20.805 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:20.806 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:20.806 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:16:20.806 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:16:20.806 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:20.806 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:20.806 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:16:20.806 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:20.828 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:16:20.829 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:16:20.829 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:16:20.829 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:20.829 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:20.829 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:20.829 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:20.829 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:20.829 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:20.830 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:20.830 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:20.830 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:20.830 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:20.830 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:20.831 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:20.831 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:20.831 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:20.831 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:20.831 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:20.831 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:16:20.832 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:16:20.844 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:16:20.853 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:20.853 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 21ms reading results.
2024-04-01 17:16:20.854 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:20.854 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:20.858 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:16:20.858 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:16:20.858 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:16:20.858 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2024-04-01 17:16:20.859 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 56.684ms
2024-04-01 17:16:20.859 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:20.859 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:16:20.859 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:20.860 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:20.860 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/1 - 200 96 application/json; charset=utf-8 60.5953ms
2024-04-01 17:16:23.362 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/3 - null null
2024-04-01 17:16:23.363 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:16:23.363 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/3'
2024-04-01 17:16:23.364 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointsofinterest/3'
2024-04-01 17:16:23.364 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:23.364 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:23.364 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:16:23.364 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:16:23.364 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:16:23.365 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:16:23.365 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:16:23.365 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:16:23.365 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:23.365 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:23.365 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:23.366 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:16:23.366 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:23.366 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:23.366 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:23.366 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:23.366 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:16:23.366 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:16:23.367 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:23.367 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:23.367 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:16:23.367 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:23.368 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:16:23.369 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:16:23.369 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:16:23.369 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:23.369 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:23.370 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:23.370 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:23.370 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:23.370 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:23.371 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:23.371 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:23.371 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:23.371 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:23.371 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:23.372 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:23.372 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:23.373 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:23.373 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:23.373 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:23.373 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:16:23.373 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:16:23.374 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:23.374 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:23.374 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:23.374 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:23.374 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:16:23.375 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:16:23.375 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:16:23.375 +08:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-04-01 17:16:23.375 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 10.2969ms
2024-04-01 17:16:23.375 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:23.376 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:16:23.376 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:23.401 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (25ms).
2024-04-01 17:16:23.402 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/3 - 404 162 application/problem+json; charset=utf-8 43.3889ms
2024-04-01 17:16:26.437 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/2 - null null
2024-04-01 17:16:26.438 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:16:26.438 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/2'
2024-04-01 17:16:26.439 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointsofinterest/2'
2024-04-01 17:16:26.439 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:26.440 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:26.440 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:16:26.440 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:16:26.441 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:16:26.441 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:16:26.441 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:16:26.441 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:16:26.442 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:26.442 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:26.443 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:26.443 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:16:26.444 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:26.444 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:26.444 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:26.445 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:26.445 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:16:26.445 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:16:26.446 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:26.446 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:26.446 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:16:26.446 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:26.448 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:16:26.448 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:16:26.449 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:16:26.449 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:26.449 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:26.449 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:26.450 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:26.450 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:26.450 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:26.451 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:26.451 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:26.451 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:26.451 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:26.452 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:26.452 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:26.452 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:26.453 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:26.453 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:26.453 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:26.453 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:16:26.454 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:16:26.454 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:16:26.455 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:26.455 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 1ms reading results.
2024-04-01 17:16:26.455 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:26.455 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:26.457 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:16:26.457 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:16:26.457 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:16:26.457 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2024-04-01 17:16:26.458 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 16.2297ms
2024-04-01 17:16:26.458 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:26.458 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:16:26.458 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:26.458 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:26.459 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest/2 - 200 108 application/json; charset=utf-8 71.8702ms
2024-04-01 17:16:30.039 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/3/pointsofinterest/5 - null null
2024-04-01 17:16:30.040 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:16:30.040 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest/5'
2024-04-01 17:16:30.040 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/3/pointsofinterest/5'
2024-04-01 17:16:30.041 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:30.041 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:30.041 +08:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:16:30.042 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:16:30.042 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:16:30.042 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:16:30.042 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:16:30.043 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:16:30.043 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:30.043 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:30.044 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:30.044 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:16:30.044 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:30.045 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:30.045 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:30.045 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:30.045 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:16:30.046 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:16:30.046 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:30.046 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:30.046 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:16:30.046 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:16:30.048 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:16:30.049 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:16:30.049 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:16:30.049 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:30.050 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:30.050 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:30.050 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:30.050 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:30.050 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:30.050 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:30.051 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:30.051 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:30.051 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:30.051 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:30.052 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:30.052 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:30.052 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:30.052 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:30.052 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:30.053 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:16:30.053 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:16:30.053 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:16:30.053 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:30.054 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:30.054 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:30.054 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:30.054 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:16:30.055 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:16:30.055 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:16:30.055 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2024-04-01 17:16:30.056 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 12.835ms
2024-04-01 17:16:30.056 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-04-01 17:16:30.056 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:16:30.056 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:30.056 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:30.057 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/3/pointsofinterest/5 - 200 134 application/json; charset=utf-8 40.2676ms
2024-04-01 17:16:51.033 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - null null
2024-04-01 17:16:51.122 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:16:51.123 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:16:51.123 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:16:51.124 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:51.124 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:51.132 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:16:51.132 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:16:51.132 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:16:51.133 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:16:51.133 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:16:51.133 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:16:51.133 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:51.134 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:51.135 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:51.135 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:16:51.135 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:51.135 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:51.135 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:51.135 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:51.138 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:16:51.138 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:16:51.138 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:16:51.138 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:51.139 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:51.139 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:51.139 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:51.139 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:51.139 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:51.139 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:51.139 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:51.140 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:51.140 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:51.140 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:51.144 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-04-01 17:16:51.146 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 17:16:51.146 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:51.147 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:51.147 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:51.147 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:51.147 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:51.147 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:16:51.147 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:16:51.147 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:16:51.147 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:16:51.148 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:51.148 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:51.148 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:51.148 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:51.153 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:16:51.153 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:16:51.153 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:16:51.153 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:16:51.158 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 24.7798ms
2024-04-01 17:16:51.158 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:51.158 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:16:51.158 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:51.158 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:51.159 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - 200 207 application/json; charset=utf-8 156.9815ms
2024-04-01 17:16:54.615 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/2/pointsofinterest - null null
2024-04-01 17:16:54.615 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:16:54.616 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-04-01 17:16:54.616 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-04-01 17:16:54.616 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:54.616 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:54.616 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:16:54.616 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:16:54.616 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:16:54.616 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:16:54.617 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:16:54.617 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:16:54.617 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:54.617 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:54.617 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:54.617 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:16:54.617 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:54.617 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:54.617 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:54.618 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:54.618 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:16:54.619 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:16:54.619 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:16:54.619 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:54.619 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:54.619 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:54.619 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:54.619 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:54.619 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:54.620 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:54.620 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:54.620 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:54.620 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:54.620 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:54.620 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:54.621 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:54.621 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:54.621 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:54.621 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:54.621 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:16:54.621 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:16:54.621 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:16:54.622 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:16:54.622 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:54.622 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:54.622 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:54.622 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:54.622 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:16:54.622 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:16:54.622 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:16:54.622 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:16:54.623 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 5.8254ms
2024-04-01 17:16:54.623 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:54.623 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:16:54.623 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:54.623 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:54.623 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/2/pointsofinterest - 200 238 application/json; charset=utf-8 8.8002ms
2024-04-01 17:16:56.600 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/3/pointsofinterest - null null
2024-04-01 17:16:56.601 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:16:56.601 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:16:56.601 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:16:56.601 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:56.601 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:56.602 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:16:56.602 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:16:56.602 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:16:56.602 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:16:56.603 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:16:56.603 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:16:56.603 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:56.604 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:56.604 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:56.604 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:16:56.604 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:56.604 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:56.605 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:56.605 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:56.606 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:16:56.606 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:16:56.606 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:16:56.606 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:56.606 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:56.607 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:56.607 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:56.607 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:56.607 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:56.607 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:56.607 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:56.607 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:56.608 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:56.608 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:56.608 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:56.609 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:56.609 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:56.609 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:56.609 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:56.609 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:16:56.609 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:16:56.610 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:16:56.610 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:16:56.610 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:56.610 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:56.610 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:56.610 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:56.611 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:16:56.611 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:16:56.611 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:16:56.611 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:16:56.611 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 8.4615ms
2024-04-01 17:16:56.612 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:56.663 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:16:56.663 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:56.668 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (3ms).
2024-04-01 17:16:56.668 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/3/pointsofinterest - 200 209 application/json; charset=utf-8 68.5529ms
2024-04-01 17:16:58.388 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/4/pointsofinterest - null null
2024-04-01 17:16:58.389 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:16:58.390 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/4/pointsofinterest'
2024-04-01 17:16:58.390 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/4/pointsofinterest'
2024-04-01 17:16:58.390 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:58.391 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:58.391 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:16:58.392 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:16:58.392 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:16:58.392 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:16:58.392 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:16:58.392 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:16:58.393 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:58.393 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:16:58.394 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:58.394 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:16:58.394 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:58.394 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:58.394 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:16:58.394 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:16:58.396 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:16:58.397 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:16:58.398 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:16:58.398 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:58.398 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:58.399 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:16:58.399 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:58.399 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:16:58.399 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:58.400 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:16:58.400 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:58.400 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:16:58.401 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:16:58.401 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:58.401 +08:00 [INF] City with id 4 wasn't found when accessing points of interest.
2024-04-01 17:16:58.402 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:16:58.402 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:16:58.403 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:16:58.403 +08:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-04-01 17:16:58.403 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 10.7802ms
2024-04-01 17:16:58.404 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:16:58.404 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:16:58.404 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:16:58.404 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:16:58.405 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/4/pointsofinterest - 404 162 application/problem+json; charset=utf-8 41.8968ms
2024-04-01 17:31:47.433 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:31:47.473 +08:00 [DBG] Hosting starting
2024-04-01 17:31:47.738 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:31:47.738 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:31:47.738 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:31:47.738 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:31:47.738 +08:00 [INF] Hosting environment: Development
2024-04-01 17:31:47.738 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:31:47.738 +08:00 [DBG] Hosting started
2024-04-01 17:32:02.355 +08:00 [DBG] Connection id "0HN2I5QB4VHIT" received FIN.
2024-04-01 17:32:02.363 +08:00 [DBG] Connection id "0HN2I5QB4VHIT" accepted.
2024-04-01 17:32:02.364 +08:00 [DBG] Connection id "0HN2I5QB4VHIT" started.
2024-04-01 17:32:02.366 +08:00 [DBG] Connection id "0HN2I5QB4VHIU" accepted.
2024-04-01 17:32:02.367 +08:00 [DBG] Connection id "0HN2I5QB4VHIU" started.
2024-04-01 17:32:02.384 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 17:32:02.404 +08:00 [DBG] Connection id "0HN2I5QB4VHIT" stopped.
2024-04-01 17:32:02.405 +08:00 [DBG] Connection id "0HN2I5QB4VHIT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 17:32:02.457 +08:00 [DBG] Connection 0HN2I5QB4VHIU established using the following protocol: "Tls12"
2024-04-01 17:32:02.470 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:7169/api/cities/3/pointsofinterest - application/json 117
2024-04-01 17:32:02.471 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:32:02.484 +08:00 [DBG] POST requests are not supported
2024-04-01 17:32:02.494 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:32:02.495 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:32:02.495 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:32:02.497 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:32:02.506 +08:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:32:02.507 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:32:02.507 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:32:02.507 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:32:02.507 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:32:02.507 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:32:02.507 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:32:02.565 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:32:02.612 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:32:02.614 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:32:02.614 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:32:02.615 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:32:02.615 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:32:02.615 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:32:02.615 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:32:02.616 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:32:02.616 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-04-01 17:32:02.616 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-04-01 17:32:02.616 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-04-01 17:32:02.618 +08:00 [DBG] Connection id "0HN2I5QB4VHIU", Request id "0HN2I5QB4VHIU:00000001": started reading request body.
2024-04-01 17:32:02.619 +08:00 [DBG] Connection id "0HN2I5QB4VHIU", Request id "0HN2I5QB4VHIU:00000001": done reading request body.
2024-04-01 17:32:02.657 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:32:02.658 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:32:02.658 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:32:02.659 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:32:18.374 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:32:18.384 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-04-01 17:32:18.451 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:32:18.465 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:32:18.468 +08:00 [DBG] Created DbConnection. (3ms).
2024-04-01 17:32:18.469 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:32:18.474 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:32:18.476 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:32:18.477 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:32:18.479 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 17:32:18.481 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:32:18.488 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:32:18.491 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:32:18.493 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 17:32:18.494 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:32:18.495 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:32:52.346 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:32:52.387 +08:00 [DBG] Hosting starting
2024-04-01 17:32:52.676 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:32:52.677 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:32:52.677 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:32:52.677 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:32:52.677 +08:00 [INF] Hosting environment: Development
2024-04-01 17:32:52.677 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:32:52.677 +08:00 [DBG] Hosting started
2024-04-01 17:32:58.576 +08:00 [DBG] Connection id "0HN2I5QRT4S8T" received FIN.
2024-04-01 17:32:58.584 +08:00 [DBG] Connection id "0HN2I5QRT4S8T" accepted.
2024-04-01 17:32:58.585 +08:00 [DBG] Connection id "0HN2I5QRT4S8T" started.
2024-04-01 17:32:58.586 +08:00 [DBG] Connection id "0HN2I5QRT4S8U" accepted.
2024-04-01 17:32:58.587 +08:00 [DBG] Connection id "0HN2I5QRT4S8U" started.
2024-04-01 17:32:58.604 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 17:32:58.630 +08:00 [DBG] Connection id "0HN2I5QRT4S8T" stopped.
2024-04-01 17:32:58.632 +08:00 [DBG] Connection id "0HN2I5QRT4S8T" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 17:32:58.654 +08:00 [DBG] Connection 0HN2I5QRT4S8U established using the following protocol: "Tls12"
2024-04-01 17:32:58.666 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:7169/api/cities/3/pointsofinterest - application/json 117
2024-04-01 17:32:58.667 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:32:58.673 +08:00 [DBG] POST requests are not supported
2024-04-01 17:32:58.682 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:32:58.683 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:32:58.683 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:32:58.684 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:32:58.692 +08:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:32:58.693 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:32:58.693 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:32:58.693 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:32:58.693 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:32:58.693 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:32:58.693 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:32:58.737 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:32:58.780 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:32:58.781 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:32:58.781 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:32:58.782 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:32:58.782 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:32:58.782 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:32:58.782 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:32:58.783 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:32:58.783 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-04-01 17:32:58.783 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-04-01 17:32:58.783 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-04-01 17:32:58.785 +08:00 [DBG] Connection id "0HN2I5QRT4S8U", Request id "0HN2I5QRT4S8U:00000001": started reading request body.
2024-04-01 17:32:58.785 +08:00 [DBG] Connection id "0HN2I5QRT4S8U", Request id "0HN2I5QRT4S8U:00000001": done reading request body.
2024-04-01 17:32:58.819 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:32:58.819 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:32:58.819 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:32:58.820 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:33:18.254 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:33:18.264 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-04-01 17:33:18.330 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:33:18.343 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:33:18.347 +08:00 [DBG] Created DbConnection. (3ms).
2024-04-01 17:33:18.348 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:33:18.353 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:33:18.354 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:33:18.356 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:33:18.357 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 17:33:18.360 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:33:18.367 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:33:18.369 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:33:18.371 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 17:33:18.372 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:33:18.373 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:33:20.347 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 21653.2107ms
2024-04-01 17:33:20.349 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:33:20.349 +08:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
PointOfInterestForCreationDto -> PointOfInterest
CityInfo.API.Models.PointOfInterestForCreationDto -> CityInfo.API.Entities.PointOfInterest
   at lambda_method35(Closure, Object, PointOfInterest, ResolutionContext)
   at CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestForCreationDto pointOfInterest) in /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/Controllers/PointsOfInterestController.cs:line 76
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-01 17:33:20.357 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:33:20.357 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 17:33:20.357 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
2024-04-01 17:33:20.358 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:33:20.373 +08:00 [DBG] Connection id "0HN2I5QRT4S8U" completed keep alive response.
2024-04-01 17:33:20.373 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:33:20.374 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:33:20.375 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:33:20.375 +08:00 [INF] Request finished HTTP/1.1 POST https://localhost:7169/api/cities/3/pointsofinterest - 500 444 application/problem+json; charset=utf-8 21711.6709ms
2024-04-01 17:33:32.132 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:33:32.171 +08:00 [DBG] Hosting starting
2024-04-01 17:33:32.384 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:33:32.384 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:33:32.384 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:33:32.384 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:33:32.384 +08:00 [INF] Hosting environment: Development
2024-04-01 17:33:32.384 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:33:32.384 +08:00 [DBG] Hosting started
2024-04-01 17:33:35.447 +08:00 [DBG] Connection id "0HN2I5R6SP221" received FIN.
2024-04-01 17:33:35.451 +08:00 [DBG] Connection id "0HN2I5R6SP221" accepted.
2024-04-01 17:33:35.452 +08:00 [DBG] Connection id "0HN2I5R6SP221" started.
2024-04-01 17:33:35.453 +08:00 [DBG] Connection id "0HN2I5R6SP222" accepted.
2024-04-01 17:33:35.454 +08:00 [DBG] Connection id "0HN2I5R6SP222" started.
2024-04-01 17:33:35.464 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 17:33:35.482 +08:00 [DBG] Connection id "0HN2I5R6SP221" stopped.
2024-04-01 17:33:35.484 +08:00 [DBG] Connection id "0HN2I5R6SP221" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 17:33:35.515 +08:00 [DBG] Connection 0HN2I5R6SP222 established using the following protocol: "Tls12"
2024-04-01 17:33:35.524 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:7169/api/cities/3/pointsofinterest - application/json 117
2024-04-01 17:33:35.524 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:33:35.530 +08:00 [DBG] POST requests are not supported
2024-04-01 17:33:35.537 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:33:35.538 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:33:35.538 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:33:35.539 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:33:35.547 +08:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:33:35.547 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:33:35.547 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:33:35.547 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:33:35.548 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:33:35.548 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:33:35.548 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:33:35.593 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:33:35.646 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:33:35.648 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:33:35.650 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:33:35.650 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:33:35.650 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:33:35.650 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:33:35.651 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:33:35.651 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:33:35.652 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-04-01 17:33:35.652 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-04-01 17:33:35.652 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-04-01 17:33:35.654 +08:00 [DBG] Connection id "0HN2I5R6SP222", Request id "0HN2I5R6SP222:00000001": started reading request body.
2024-04-01 17:33:35.654 +08:00 [DBG] Connection id "0HN2I5R6SP222", Request id "0HN2I5R6SP222:00000001": done reading request body.
2024-04-01 17:33:35.691 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:33:35.691 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:33:35.691 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:33:35.693 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:33:39.793 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:33:39.803 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-04-01 17:33:39.869 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:33:39.882 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:33:39.886 +08:00 [DBG] Created DbConnection. (3ms).
2024-04-01 17:33:39.887 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:33:39.891 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:33:39.892 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:33:39.894 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:33:39.895 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 17:33:39.897 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:33:39.903 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:33:39.905 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:33:39.907 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 17:33:39.908 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:33:39.909 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:35:08.986 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:35:09.027 +08:00 [DBG] Hosting starting
2024-04-01 17:35:09.242 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:35:09.242 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:35:09.242 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:35:09.242 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:35:09.242 +08:00 [INF] Hosting environment: Development
2024-04-01 17:35:09.242 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:35:09.243 +08:00 [DBG] Hosting started
2024-04-01 17:35:16.588 +08:00 [DBG] Connection id "0HN2I5S51AMFF" received FIN.
2024-04-01 17:35:16.594 +08:00 [DBG] Connection id "0HN2I5S51AMFF" accepted.
2024-04-01 17:35:16.595 +08:00 [DBG] Connection id "0HN2I5S51AMFF" started.
2024-04-01 17:35:16.597 +08:00 [DBG] Connection id "0HN2I5S51AMFG" accepted.
2024-04-01 17:35:16.597 +08:00 [DBG] Connection id "0HN2I5S51AMFG" started.
2024-04-01 17:35:16.613 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 17:35:16.634 +08:00 [DBG] Connection id "0HN2I5S51AMFF" stopped.
2024-04-01 17:35:16.636 +08:00 [DBG] Connection id "0HN2I5S51AMFF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 17:35:16.661 +08:00 [DBG] Connection 0HN2I5S51AMFG established using the following protocol: "Tls12"
2024-04-01 17:35:16.671 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:7169/api/cities/3/pointsofinterest - application/json 117
2024-04-01 17:35:16.672 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:35:16.678 +08:00 [DBG] POST requests are not supported
2024-04-01 17:35:16.686 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:35:16.687 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:35:16.688 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:35:16.688 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:35:16.698 +08:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:35:16.699 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:35:16.699 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:35:16.699 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:35:16.699 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:35:16.699 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:35:16.700 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:35:16.758 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:35:16.803 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:35:16.804 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:35:16.805 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:35:16.805 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:35:16.805 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:35:16.805 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:35:16.806 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:35:16.806 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:35:16.806 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-04-01 17:35:16.806 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-04-01 17:35:16.807 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-04-01 17:35:16.808 +08:00 [DBG] Connection id "0HN2I5S51AMFG", Request id "0HN2I5S51AMFG:00000001": started reading request body.
2024-04-01 17:35:16.809 +08:00 [DBG] Connection id "0HN2I5S51AMFG", Request id "0HN2I5S51AMFG:00000001": done reading request body.
2024-04-01 17:35:16.844 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:35:16.844 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:35:16.844 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:35:16.846 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:35:20.325 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:35:20.335 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-04-01 17:35:20.399 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:35:20.412 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:35:20.416 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 17:35:20.417 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:35:20.423 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:35:20.424 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:35:20.425 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:35:20.427 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 17:35:20.429 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:35:20.436 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:35:20.439 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:35:20.441 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 17:35:20.442 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:35:20.443 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:36:37.167 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 17:36:37.187 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:36:37.190 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:36:37.191 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:36:37.191 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:36:37.191 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:36:37.191 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:36:37.191 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 17:36:37.191 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 17:36:37.198 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:36:37.203 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:36:37.203 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 11ms reading results.
2024-04-01 17:36:37.203 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:36:37.203 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:36:54.410 +08:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-04-01 17:36:54.413 +08:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-04-01 17:36:54.424 +08:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:36:54.435 +08:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:36:54.440 +08:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:36:54.445 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:36:54.446 +08:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-04-01 17:36:54.467 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:36:54.467 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:36:54.468 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:36:54.468 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:36:54.468 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:36:54.468 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-04-01 17:36:54.469 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-04-01 17:36:54.472 +08:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-01 17:36:54.476 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:36:54.476 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 6ms reading results.
2024-04-01 17:36:54.476 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:36:54.476 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:36:54.478 +08:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:36:54.478 +08:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-04-01 17:36:58.745 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:36:58.745 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 17:36:58.745 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 17:36:58.746 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 17:36:58.746 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:36:58.746 +08:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2024-04-01 17:36:58.752 +08:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address GetPointOfInterest(cityId=[3],pointOfInterestId=[7])
2024-04-01 17:36:58.753 +08:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointOfInterestId} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/cities/3/pointsofinterest/7 and 
2024-04-01 17:36:58.753 +08:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/cities/3/pointsofinterest/7
2024-04-01 17:36:58.796 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 102072.1963ms
2024-04-01 17:36:58.796 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:36:58.796 +08:00 [DBG] Connection id "0HN2I5S51AMFG" completed keep alive response.
2024-04-01 17:36:58.798 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:36:58.799 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:36:58.799 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:36:58.800 +08:00 [INF] Request finished HTTP/1.1 POST https://localhost:7169/api/cities/3/pointsofinterest - 201 111 application/json; charset=utf-8 102130.4033ms
2024-04-01 17:37:02.776 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities - null null
2024-04-01 17:37:02.785 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:37:02.786 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-04-01 17:37:02.786 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-04-01 17:37:02.786 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 17:37:02.786 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 17:37:02.790 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 17:37:02.790 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:37:02.790 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:37:02.790 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:37:02.791 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:37:02.791 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:37:02.791 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 17:37:02.792 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 17:37:02.808 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:37:02.810 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-04-01 17:37:02.813 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 17:37:02.814 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:37:02.814 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:37:02.814 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:37:02.814 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:02.814 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:37:02.814 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:02.814 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:02.814 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 17:37:02.815 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 17:37:02.815 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:37:02.815 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:37:02.815 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:37:02.815 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:02.815 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:37:02.815 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:02.815 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:37:02.819 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:37:02.820 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 17:37:02.820 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 17:37:02.820 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 17:37:02.820 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:37:02.820 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:37:02.824 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 33.1643ms
2024-04-01 17:37:02.824 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 17:37:02.824 +08:00 [DBG] Connection id "0HN2I5S51AMFG" completed keep alive response.
2024-04-01 17:37:02.824 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:37:02.824 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:37:02.824 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:37:02.824 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities - 200 247 application/json; charset=utf-8 48.6885ms
2024-04-01 17:37:07.439 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities - null null
2024-04-01 17:37:07.443 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:37:07.443 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-04-01 17:37:07.443 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-04-01 17:37:07.443 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 17:37:07.444 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 17:37:07.445 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 17:37:07.445 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:37:07.445 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:37:07.445 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:37:07.445 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:37:07.446 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:37:07.446 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 17:37:07.447 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 17:37:07.469 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:37:07.471 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:37:07.471 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:37:07.471 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:37:07.471 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:07.471 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:37:07.471 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:07.471 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:07.472 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 17:37:07.472 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 17:37:07.472 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:37:07.472 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:37:07.472 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:37:07.472 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:07.472 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:37:07.472 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:07.472 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:37:07.473 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:37:07.473 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 17:37:07.473 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 17:37:07.473 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 17:37:07.473 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:37:07.473 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:37:07.474 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 28.1008ms
2024-04-01 17:37:07.474 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 17:37:07.474 +08:00 [DBG] Connection id "0HN2I5S51AMFG" completed keep alive response.
2024-04-01 17:37:07.474 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:37:07.474 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:37:07.474 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:37:07.474 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities - 200 247 application/json; charset=utf-8 35.0755ms
2024-04-01 17:37:13.640 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/1/pointsofinterest - null null
2024-04-01 17:37:13.640 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:37:13.640 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:37:13.641 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:37:13.641 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:37:13.641 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:37:13.645 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:37:13.646 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:37:13.646 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:37:13.646 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:37:13.646 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:37:13.646 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:37:13.646 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:37:13.647 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:37:13.647 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:37:13.648 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:37:13.648 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:37:13.648 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:37:13.648 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:37:13.649 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:37:13.652 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:37:13.653 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:37:13.653 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:37:13.653 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:37:13.654 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:13.654 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:37:13.654 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:13.654 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:13.655 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:37:13.655 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:37:13.655 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:13.655 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:37:13.656 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:13.656 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:37:13.658 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-04-01 17:37:13.662 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 17:37:13.663 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:37:13.663 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:13.663 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:37:13.663 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:13.663 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:13.664 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:37:13.664 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:37:13.664 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:37:13.665 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:37:13.665 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:13.665 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:37:13.665 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:13.665 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:37:13.669 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:37:13.669 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 17:37:13.670 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 17:37:13.670 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 17:37:13.670 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:37:13.670 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:37:13.670 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 24.3584ms
2024-04-01 17:37:13.670 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:37:13.671 +08:00 [DBG] Connection id "0HN2I5S51AMFG" completed keep alive response.
2024-04-01 17:37:13.671 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:37:13.671 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:37:13.671 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:37:13.671 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/1/pointsofinterest - 200 207 application/json; charset=utf-8 31.3486ms
2024-04-01 17:37:17.946 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - null null
2024-04-01 17:37:17.946 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:37:17.946 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:37:17.947 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:37:17.947 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:37:17.947 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:37:17.947 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:37:17.947 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:37:17.947 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:37:17.947 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:37:17.947 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:37:17.948 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:37:17.948 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:37:17.948 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:37:17.949 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:37:17.949 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:37:17.949 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:37:17.949 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:37:17.949 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:37:17.949 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:37:17.950 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:37:17.950 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:37:17.950 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:37:17.951 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:37:17.951 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:17.951 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:37:17.951 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:17.951 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:17.951 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:37:17.951 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:37:17.951 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:17.952 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:37:17.952 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:17.952 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:37:17.952 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:37:17.953 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:17.953 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:37:17.953 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:17.953 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:37:17.954 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:37:17.954 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:37:17.954 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:37:17.954 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:37:17.954 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:37:17.954 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:17.955 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:37:17.955 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:37:17.955 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:37:17.955 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:37:17.955 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 17:37:17.956 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 17:37:17.956 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 17:37:17.956 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:37:17.956 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:37:17.956 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 8.7942ms
2024-04-01 17:37:17.957 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:37:17.957 +08:00 [DBG] Connection id "0HN2I5S51AMFG" completed keep alive response.
2024-04-01 17:37:17.957 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:37:17.957 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:37:17.957 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:37:17.958 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - 200 321 application/json; charset=utf-8 11.9824ms
2024-04-01 17:37:56.123 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:37:56.162 +08:00 [DBG] Hosting starting
2024-04-01 17:37:56.455 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:37:56.456 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:37:56.456 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:37:56.456 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:37:56.456 +08:00 [INF] Hosting environment: Development
2024-04-01 17:37:56.456 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:37:56.456 +08:00 [DBG] Hosting started
2024-04-01 17:38:04.395 +08:00 [DBG] Connection id "0HN2I5TN1L5HB" received FIN.
2024-04-01 17:38:04.403 +08:00 [DBG] Connection id "0HN2I5TN1L5HB" accepted.
2024-04-01 17:38:04.404 +08:00 [DBG] Connection id "0HN2I5TN1L5HB" started.
2024-04-01 17:38:04.407 +08:00 [DBG] Connection id "0HN2I5TN1L5HC" accepted.
2024-04-01 17:38:04.408 +08:00 [DBG] Connection id "0HN2I5TN1L5HC" started.
2024-04-01 17:38:04.427 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 17:38:04.448 +08:00 [DBG] Connection id "0HN2I5TN1L5HB" stopped.
2024-04-01 17:38:04.449 +08:00 [DBG] Connection id "0HN2I5TN1L5HB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 17:38:04.477 +08:00 [DBG] Connection 0HN2I5TN1L5HC established using the following protocol: "Tls12"
2024-04-01 17:38:04.488 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:7169/api/cities/3/pointsofinterest - application/json 117
2024-04-01 17:38:04.488 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:38:04.495 +08:00 [DBG] POST requests are not supported
2024-04-01 17:38:04.504 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:38:04.505 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:38:04.505 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:38:04.506 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:38:04.514 +08:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:38:04.514 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:38:04.514 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:38:04.514 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:38:04.515 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:38:04.515 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:38:04.515 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:38:04.572 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:38:04.619 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:38:04.620 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:38:04.620 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:38:04.621 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:04.621 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:04.621 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:38:04.621 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:04.622 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:38:04.622 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-04-01 17:38:04.622 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-04-01 17:38:04.622 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-04-01 17:38:04.624 +08:00 [DBG] Connection id "0HN2I5TN1L5HC", Request id "0HN2I5TN1L5HC:00000001": started reading request body.
2024-04-01 17:38:04.625 +08:00 [DBG] Connection id "0HN2I5TN1L5HC", Request id "0HN2I5TN1L5HC:00000001": done reading request body.
2024-04-01 17:38:04.661 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:38:04.661 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:38:04.661 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:38:04.662 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:38:22.594 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:38:22.605 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-04-01 17:38:22.667 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:38:22.679 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:38:22.682 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 17:38:22.683 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:38:22.689 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:22.691 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:38:22.692 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:22.693 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 17:38:22.696 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:38:22.703 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:38:22.705 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:22.707 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 17:38:22.708 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:22.708 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:38:22.711 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 17:38:22.723 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:38:22.725 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:38:22.725 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:22.725 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:38:22.725 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:22.725 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:22.725 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 17:38:22.725 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 17:38:22.730 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:22.734 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:22.734 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 9ms reading results.
2024-04-01 17:38:22.735 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:22.735 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:38:22.736 +08:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-04-01 17:38:22.736 +08:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-04-01 17:38:22.741 +08:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:22.748 +08:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:22.752 +08:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:22.755 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:22.756 +08:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-04-01 17:38:22.774 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:38:22.774 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:22.775 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:38:22.775 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:22.775 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:22.775 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-04-01 17:38:22.776 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-04-01 17:38:22.779 +08:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-01 17:38:22.782 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:22.782 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 5ms reading results.
2024-04-01 17:38:22.782 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:22.782 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:38:22.784 +08:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:22.784 +08:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-04-01 17:38:22.785 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:38:22.786 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 17:38:22.786 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 17:38:22.786 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 17:38:22.786 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:38:22.786 +08:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2024-04-01 17:38:22.792 +08:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address GetPointOfInterest(cityId=[3],pointOfInterestId=[8])
2024-04-01 17:38:22.793 +08:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointOfInterestId} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/cities/3/pointsofinterest/8 and 
2024-04-01 17:38:22.793 +08:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/cities/3/pointsofinterest/8
2024-04-01 17:38:22.804 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 18288.8106ms
2024-04-01 17:38:22.805 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:38:22.805 +08:00 [DBG] Connection id "0HN2I5TN1L5HC" completed keep alive response.
2024-04-01 17:38:22.805 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:38:22.807 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:38:22.807 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:38:22.807 +08:00 [INF] Request finished HTTP/1.1 POST https://localhost:7169/api/cities/3/pointsofinterest - 201 111 application/json; charset=utf-8 18321.3682ms
2024-04-01 17:38:36.249 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - null null
2024-04-01 17:38:36.260 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:38:36.261 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:38:36.261 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:38:36.262 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:38:36.262 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:38:36.267 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:38:36.267 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:38:36.267 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:38:36.268 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:38:36.268 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:38:36.268 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:38:36.268 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:38:36.270 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:38:36.271 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:38:36.271 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:38:36.271 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:36.271 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:36.271 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:38:36.271 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:36.277 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:38:36.279 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:38:36.279 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:38:36.279 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:38:36.280 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:36.280 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:38:36.280 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:36.280 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:36.280 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:38:36.280 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:38:36.280 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:36.281 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:38:36.281 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:36.281 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:38:36.283 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-04-01 17:38:36.285 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 17:38:36.285 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:38:36.285 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:36.285 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:38:36.285 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:36.285 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:36.285 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:38:36.285 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:38:36.286 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:36.286 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:36.286 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:36.286 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:36.286 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:36.286 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:38:36.286 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:36.287 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:38:36.291 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:38:36.291 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 17:38:36.291 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 17:38:36.291 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 17:38:36.291 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:38:36.291 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:38:36.295 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 26.8006ms
2024-04-01 17:38:36.295 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:38:36.295 +08:00 [DBG] Connection id "0HN2I5TN1L5HC" completed keep alive response.
2024-04-01 17:38:36.295 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:38:36.295 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:38:36.295 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:38:36.295 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - 200 433 application/json; charset=utf-8 47.7891ms
2024-04-01 17:38:40.014 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - null null
2024-04-01 17:38:40.016 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:38:40.016 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:38:40.016 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:38:40.017 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:38:40.017 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:38:40.017 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:38:40.017 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:38:40.018 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:38:40.018 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:38:40.018 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:38:40.018 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:38:40.019 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:38:40.020 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:38:40.020 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:38:40.021 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:38:40.021 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:40.021 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:40.022 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:38:40.022 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:40.043 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:38:40.045 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:38:40.045 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:38:40.045 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:38:40.046 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:40.046 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:38:40.046 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:40.046 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:40.046 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:38:40.046 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:38:40.046 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:40.047 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:38:40.047 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:40.047 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:38:40.047 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:38:40.047 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:40.047 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:38:40.048 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:40.048 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:40.048 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:38:40.048 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:38:40.048 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:40.048 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:40.048 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:40.049 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:38:40.049 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:40.049 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:38:40.049 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:40.049 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:38:40.050 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:38:40.050 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 17:38:40.050 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 17:38:40.050 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 17:38:40.050 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:38:40.050 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:38:40.050 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 31.4704ms
2024-04-01 17:38:40.050 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:38:40.050 +08:00 [DBG] Connection id "0HN2I5TN1L5HC" completed keep alive response.
2024-04-01 17:38:40.050 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:38:40.050 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:38:40.050 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:38:40.050 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - 200 433 application/json; charset=utf-8 36.3307ms
2024-04-01 17:38:48.667 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:7169/api/cities/3/pointsofinterest - application/json 117
2024-04-01 17:38:48.667 +08:00 [DBG] POST requests are not supported
2024-04-01 17:38:48.668 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:38:48.668 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 17:38:48.668 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:38:48.668 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-04-01 17:38:48.668 +08:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:38:48.669 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:38:48.669 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:38:48.669 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:38:48.669 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:38:48.669 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:38:48.669 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:38:48.670 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:38:48.671 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:38:48.671 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:38:48.671 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:48.672 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:48.672 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:38:48.672 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:38:48.672 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:38:48.673 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-04-01 17:38:48.673 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-04-01 17:38:48.673 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-04-01 17:38:48.674 +08:00 [DBG] Connection id "0HN2I5TN1L5HC", Request id "0HN2I5TN1L5HC:00000004": started reading request body.
2024-04-01 17:38:48.674 +08:00 [DBG] Connection id "0HN2I5TN1L5HC", Request id "0HN2I5TN1L5HC:00000004": done reading request body.
2024-04-01 17:38:48.674 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:38:48.674 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:38:48.674 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-04-01 17:38:48.675 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-04-01 17:38:52.092 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:38:52.093 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:38:52.093 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:38:52.093 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:38:52.093 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:52.093 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:38:52.093 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:52.093 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:38:52.093 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:38:52.093 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:38:52.093 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:52.093 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:38:52.094 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:38:52.094 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:40:15.853 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:40:15.858 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:40:15.859 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:40:15.859 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:40:15.859 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:40:15.859 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 17:40:15.859 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 17:40:15.860 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:40:15.860 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:40:15.860 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:40:15.860 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:40:15.860 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:40:41.714 +08:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-04-01 17:40:41.715 +08:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-04-01 17:40:41.715 +08:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:40:41.717 +08:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:40:41.717 +08:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:40:41.718 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:40:41.718 +08:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-04-01 17:40:41.719 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:40:41.719 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:40:41.719 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:40:41.719 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:40:41.719 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:40:41.719 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-04-01 17:40:41.720 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-04-01 17:40:41.720 +08:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-01 17:40:41.721 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:40:41.721 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 1ms reading results.
2024-04-01 17:40:41.721 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:40:41.721 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:40:41.722 +08:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:40:41.722 +08:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-04-01 17:51:58.823 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:51:58.865 +08:00 [DBG] Hosting starting
2024-04-01 17:51:59.088 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:51:59.088 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:51:59.088 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:51:59.088 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:51:59.088 +08:00 [INF] Hosting environment: Development
2024-04-01 17:51:59.088 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:51:59.089 +08:00 [DBG] Hosting started
2024-04-01 17:52:01.749 +08:00 [DBG] Connection id "0HN2I65GJ9E67" received FIN.
2024-04-01 17:52:01.751 +08:00 [DBG] Connection id "0HN2I65GJ9E67" accepted.
2024-04-01 17:52:01.751 +08:00 [DBG] Connection id "0HN2I65GJ9E67" started.
2024-04-01 17:52:01.752 +08:00 [DBG] Connection id "0HN2I65GJ9E68" accepted.
2024-04-01 17:52:01.752 +08:00 [DBG] Connection id "0HN2I65GJ9E68" started.
2024-04-01 17:52:01.761 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 17:52:01.777 +08:00 [DBG] Connection id "0HN2I65GJ9E67" stopped.
2024-04-01 17:52:01.779 +08:00 [DBG] Connection id "0HN2I65GJ9E67" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 17:52:01.807 +08:00 [DBG] Connection 0HN2I65GJ9E68 established using the following protocol: "Tls12"
2024-04-01 17:52:01.815 +08:00 [DBG] Connection id "0HN2I65GJ9E68" bad request data: "Request is missing Host header."
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Request is missing Host header.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.EnsureHostHeaderExists()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2024-04-01 17:52:01.816 +08:00 [DBG] Connection id "0HN2I65GJ9E68" disconnecting.
2024-04-01 17:52:01.816 +08:00 [DBG] Connection id "0HN2I65GJ9E68" stopped.
2024-04-01 17:52:01.817 +08:00 [DBG] Connection id "0HN2I65GJ9E68" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 17:52:10.747 +08:00 [DBG] Connection id "0HN2I65GJ9E69" accepted.
2024-04-01 17:52:10.747 +08:00 [DBG] Connection id "0HN2I65GJ9E69" started.
2024-04-01 17:52:10.785 +08:00 [DBG] Connection 0HN2I65GJ9E69 established using the following protocol: "Tls12"
2024-04-01 17:52:10.818 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-04-01 17:52:10.819 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:52:10.876 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 62.4575ms
2024-04-01 17:52:11.027 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-04-01 17:52:11.085 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 58.5485ms
2024-04-01 17:52:21.726 +08:00 [INF] Request starting HTTP/2 PUT https://localhost:7169/api/cities/1/pointsofinterest/1 - application/json-patch+json 49
2024-04-01 17:52:21.729 +08:00 [DBG] PUT requests are not supported
2024-04-01 17:52:21.756 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 17:52:21.758 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 17:52:21.759 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2024-04-01 17:52:21.761 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2024-04-01 17:52:21.776 +08:00 [INF] Route matched with {action = "UpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdatePointOfInterest(Int32, Int32, CityInfo.API.Models.PointOfInterestForUpdateDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:52:21.776 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:52:21.777 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:52:21.777 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:52:21.777 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:52:21.777 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:52:21.778 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:52:21.842 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:52:21.888 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:52:21.889 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:52:21.889 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:52:21.889 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:52:21.889 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:52:21.890 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:52:21.890 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:52:21.890 +08:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' ...
2024-04-01 17:52:21.890 +08:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' using the name 'pointofinterestid' in request data ...
2024-04-01 17:52:21.890 +08:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2024-04-01 17:52:21.891 +08:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2024-04-01 17:52:21.891 +08:00 [DBG] Attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32' ...
2024-04-01 17:52:21.891 +08:00 [DBG] Done attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32'.
2024-04-01 17:52:21.891 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' ...
2024-04-01 17:52:21.891 +08:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' using the name '' in request data ...
2024-04-01 17:52:21.891 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-04-01 17:52:21.891 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-04-01 17:52:21.893 +08:00 [DBG] Connection id "0HN2I65GJ9E69", Request id "0HN2I65GJ9E69:00000005": started reading request body.
2024-04-01 17:52:21.893 +08:00 [DBG] Connection id "0HN2I65GJ9E69", Request id "0HN2I65GJ9E69:00000005": done reading request body.
2024-04-01 17:52:21.922 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2024-04-01 17:52:21.922 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2024-04-01 17:52:21.922 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' ...
2024-04-01 17:52:21.923 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2024-04-01 17:52:22.139 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:52:22.149 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-04-01 17:52:22.211 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:52:22.224 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:52:22.227 +08:00 [DBG] Created DbConnection. (3ms).
2024-04-01 17:52:22.228 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:52:22.234 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:22.235 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:52:22.237 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-04-01 17:52:22.238 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 17:52:22.240 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:52:22.247 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:52:22.250 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:22.252 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 17:52:22.253 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:22.254 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:52:22.255 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityid_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2024-04-01 17:52:22.266 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityid_0) && (p.Id == @__pointOfInterestId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:52:22.269 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:52:22.269 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:22.269 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:52:22.269 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:22.269 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:22.269 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:52:22.269 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:52:22.274 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:52:22.278 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:22.278 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 8ms reading results.
2024-04-01 17:52:22.278 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:22.278 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:52:22.281 +08:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-04-01 17:52:22.282 +08:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-04-01 17:52:22.285 +08:00 [DBG] The unchanged property 'PointOfInterest.Description' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-01 17:52:22.287 +08:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:52:22.287 +08:00 [DBG] The unchanged property 'PointOfInterest.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-01 17:52:22.288 +08:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-04-01 17:52:22.303 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:52:22.303 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:22.304 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:52:22.304 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:22.304 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:22.304 +08:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 6), @p1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2
RETURNING 1;
2024-04-01 17:52:22.304 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 6), @p1='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2
RETURNING 1;
2024-04-01 17:52:22.306 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:22.306 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 1ms reading results.
2024-04-01 17:52:22.306 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:22.306 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:52:22.307 +08:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:52:22.308 +08:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-04-01 17:52:22.308 +08:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-04-01 17:52:22.309 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API) in 531.1333ms
2024-04-01 17:52:22.309 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2024-04-01 17:52:22.310 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:52:22.311 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:52:22.311 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:52:22.311 +08:00 [INF] Request finished HTTP/2 PUT https://localhost:7169/api/cities/1/pointsofinterest/1 - 204 null null 585.9745ms
2024-04-01 17:52:36.546 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - null null
2024-04-01 17:52:36.548 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:52:36.549 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:52:36.549 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:52:36.550 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:52:36.550 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:52:36.555 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:52:36.555 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:52:36.556 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:52:36.556 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:52:36.556 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:52:36.556 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:52:36.556 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:52:36.558 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:52:36.558 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:52:36.559 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:52:36.559 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:52:36.559 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:52:36.559 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:52:36.559 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:52:36.571 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:52:36.574 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:52:36.574 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:52:36.574 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:52:36.574 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:36.575 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:52:36.575 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:36.575 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:36.575 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:52:36.575 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:52:36.575 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:36.576 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:52:36.576 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:36.576 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:52:36.579 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-04-01 17:52:36.581 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 17:52:36.582 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:52:36.582 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:36.582 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:52:36.582 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:36.582 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:36.582 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:52:36.582 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:52:36.583 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:52:36.583 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:52:36.583 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:36.583 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:52:36.583 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:36.583 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:52:36.590 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:52:36.591 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-01 17:52:36.593 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-01 17:52:36.593 +08:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2024-04-01 17:52:36.594 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:52:36.594 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-01 17:52:36.594 +08:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-01 17:52:36.594 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 37.6874ms
2024-04-01 17:52:36.594 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:52:36.594 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:52:36.594 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:52:36.595 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:52:36.595 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - 406 0 null 74.8634ms
2024-04-01 17:52:41.848 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - null null
2024-04-01 17:52:41.849 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 17:52:41.850 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:52:41.850 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-04-01 17:52:41.850 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:52:41.850 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:52:41.850 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:52:41.851 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:52:41.851 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:52:41.851 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:52:41.851 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:52:41.852 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:52:41.852 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:52:41.856 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:52:41.856 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:52:41.856 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:52:41.857 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:52:41.857 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:52:41.857 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:52:41.857 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:52:41.879 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:52:41.880 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:52:41.880 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 17:52:41.880 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:52:41.880 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:41.880 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:52:41.880 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:41.880 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:41.881 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:52:41.881 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:52:41.881 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:41.881 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:52:41.881 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:41.881 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:52:41.882 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:52:41.882 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:41.882 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:52:41.882 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:41.882 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:52:41.882 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:52:41.883 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 17:52:41.883 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:52:41.883 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:52:41.883 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:41.883 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 17:52:41.883 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:52:41.883 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:52:41.884 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:52:41.884 +08:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2024-04-01 17:52:41.885 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 17:52:41.885 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 17:52:41.910 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 58.4236ms
2024-04-01 17:52:41.911 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 17:52:41.911 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:52:41.911 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:52:41.911 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:52:41.911 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/cities/1/pointsofinterest - 200 158 application/json; charset=utf-8 88.3777ms
2024-04-01 17:56:33.165 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 17:56:33.206 +08:00 [DBG] Hosting starting
2024-04-01 17:56:33.445 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 17:56:33.445 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 17:56:33.445 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 17:56:33.445 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 17:56:33.445 +08:00 [INF] Hosting environment: Development
2024-04-01 17:56:33.446 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 17:56:33.446 +08:00 [DBG] Hosting started
2024-04-01 17:57:02.899 +08:00 [DBG] Connection id "0HN2I68AB991P" received FIN.
2024-04-01 17:57:02.902 +08:00 [DBG] Connection id "0HN2I68AB991P" accepted.
2024-04-01 17:57:02.903 +08:00 [DBG] Connection id "0HN2I68AB991P" started.
2024-04-01 17:57:02.909 +08:00 [DBG] Connection id "0HN2I68AB991Q" accepted.
2024-04-01 17:57:02.909 +08:00 [DBG] Connection id "0HN2I68AB991Q" started.
2024-04-01 17:57:02.920 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 17:57:02.938 +08:00 [DBG] Connection id "0HN2I68AB991P" stopped.
2024-04-01 17:57:02.940 +08:00 [DBG] Connection id "0HN2I68AB991P" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 17:57:02.975 +08:00 [DBG] Connection 0HN2I68AB991Q established using the following protocol: "Tls12"
2024-04-01 17:57:02.985 +08:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7169/api/cities/1/pointsofinterest/1 - application/json 101
2024-04-01 17:57:02.986 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 17:57:02.992 +08:00 [DBG] PATCH requests are not supported
2024-04-01 17:57:03.000 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 17:57:03.001 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 17:57:03.001 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2024-04-01 17:57:03.002 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2024-04-01 17:57:03.009 +08:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 17:57:03.010 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 17:57:03.010 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 17:57:03.010 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 17:57:03.010 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 17:57:03.010 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 17:57:03.010 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:57:03.067 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 17:57:03.112 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 17:57:03.113 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:57:03.113 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 17:57:03.114 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:57:03.114 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:57:03.114 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 17:57:03.114 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 17:57:03.115 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:57:03.115 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 17:57:03.115 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:57:03.115 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:57:03.115 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 17:57:03.115 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 17:57:03.115 +08:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' ...
2024-04-01 17:57:03.115 +08:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' using the name '' in request data ...
2024-04-01 17:57:03.115 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-04-01 17:57:03.115 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-04-01 17:57:03.117 +08:00 [DBG] Connection id "0HN2I68AB991Q", Request id "0HN2I68AB991Q:00000001": started reading request body.
2024-04-01 17:57:03.117 +08:00 [DBG] Connection id "0HN2I68AB991Q", Request id "0HN2I68AB991Q:00000001": done reading request body.
2024-04-01 17:57:03.161 +08:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2024-04-01 17:57:03.161 +08:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2024-04-01 17:57:03.161 +08:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' ...
2024-04-01 17:57:03.162 +08:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2024-04-01 17:57:03.372 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 17:57:03.382 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-04-01 17:57:03.446 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:57:03.459 +08:00 [DBG] Creating DbConnection.
2024-04-01 17:57:03.462 +08:00 [DBG] Created DbConnection. (3ms).
2024-04-01 17:57:03.463 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:57:03.468 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:57:03.469 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:57:03.471 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:57:03.472 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-01 17:57:03.475 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:57:03.483 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 17:57:03.485 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:57:03.487 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 17:57:03.488 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:57:03.489 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:57:03.490 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityid_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2024-04-01 17:57:03.503 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityid_0) && (p.Id == @__pointOfInterestId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 17:57:03.506 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:57:03.506 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:57:03.506 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 17:57:03.506 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:57:03.506 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 17:57:03.506 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:57:03.506 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 17:57:03.513 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 17:57:03.518 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:57:03.518 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 11ms reading results.
2024-04-01 17:57:03.518 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 17:57:03.518 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:57:04.052 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API) in 1040.5542ms
2024-04-01 17:57:04.053 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2024-04-01 17:57:04.053 +08:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
PointOfInterest -> PointOfInterestForUpdateDto
CityInfo.API.Entities.PointOfInterest -> CityInfo.API.Models.PointOfInterestForUpdateDto
   at lambda_method62(Closure, Object, PointOfInterestForUpdateDto, ResolutionContext)
   at CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest(Int32 cityId, Int32 pointOfInterestId, JsonPatchDocument`1 patchDocument) in /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/Controllers/PointsOfInterestController.cs:line 134
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-01 17:57:04.066 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 17:57:04.067 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 17:57:04.067 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
2024-04-01 17:57:04.067 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 17:57:04.081 +08:00 [DBG] Connection id "0HN2I68AB991Q" completed keep alive response.
2024-04-01 17:57:04.082 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 17:57:04.083 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 17:57:04.083 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 17:57:04.084 +08:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7169/api/cities/1/pointsofinterest/1 - 500 440 application/problem+json; charset=utf-8 1100.6652ms
2024-04-01 18:04:01.708 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-01 18:04:01.752 +08:00 [DBG] Hosting starting
2024-04-01 18:04:01.958 +08:00 [INF] Now listening on: https://localhost:7169
2024-04-01 18:04:01.958 +08:00 [INF] Now listening on: http://localhost:5169
2024-04-01 18:04:01.958 +08:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-04-01 18:04:01.958 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-01 18:04:01.958 +08:00 [INF] Hosting environment: Development
2024-04-01 18:04:01.958 +08:00 [INF] Content root path: /Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API
2024-04-01 18:04:01.958 +08:00 [DBG] Hosting started
2024-04-01 18:04:04.950 +08:00 [DBG] Connection id "0HN2I6C848UGT" received FIN.
2024-04-01 18:04:04.956 +08:00 [DBG] Connection id "0HN2I6C848UGT" accepted.
2024-04-01 18:04:04.957 +08:00 [DBG] Connection id "0HN2I6C848UGT" started.
2024-04-01 18:04:04.959 +08:00 [DBG] Connection id "0HN2I6C848UGU" accepted.
2024-04-01 18:04:04.959 +08:00 [DBG] Connection id "0HN2I6C848UGU" started.
2024-04-01 18:04:04.977 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-01 18:04:04.998 +08:00 [DBG] Connection id "0HN2I6C848UGT" stopped.
2024-04-01 18:04:05.000 +08:00 [DBG] Connection id "0HN2I6C848UGT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-01 18:04:05.025 +08:00 [DBG] Connection 0HN2I6C848UGU established using the following protocol: "Tls12"
2024-04-01 18:04:05.036 +08:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7169/api/cities/1/pointsofinterest/1 - application/json 101
2024-04-01 18:04:05.037 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-01 18:04:05.044 +08:00 [DBG] PATCH requests are not supported
2024-04-01 18:04:05.052 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 18:04:05.053 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 18:04:05.053 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2024-04-01 18:04:05.054 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2024-04-01 18:04:05.062 +08:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 18:04:05.062 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 18:04:05.062 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 18:04:05.062 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 18:04:05.062 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 18:04:05.063 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 18:04:05.063 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:04:05.113 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-01 18:04:05.157 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:04:05.158 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:04:05.158 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 18:04:05.158 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:04:05.158 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:04:05.158 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:04:05.159 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:04:05.159 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 18:04:05.159 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 18:04:05.159 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:04:05.159 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:04:05.159 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 18:04:05.159 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:04:05.159 +08:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' ...
2024-04-01 18:04:05.160 +08:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' using the name '' in request data ...
2024-04-01 18:04:05.160 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-04-01 18:04:05.160 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-04-01 18:04:05.162 +08:00 [DBG] Connection id "0HN2I6C848UGU", Request id "0HN2I6C848UGU:00000001": started reading request body.
2024-04-01 18:04:05.162 +08:00 [DBG] Connection id "0HN2I6C848UGU", Request id "0HN2I6C848UGU:00000001": done reading request body.
2024-04-01 18:04:05.206 +08:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2024-04-01 18:04:05.206 +08:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2024-04-01 18:04:05.206 +08:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' ...
2024-04-01 18:04:05.207 +08:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2024-04-01 18:04:05.430 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 18:04:05.440 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-04-01 18:04:05.504 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 18:04:05.516 +08:00 [DBG] Creating DbConnection.
2024-04-01 18:04:05.519 +08:00 [DBG] Created DbConnection. (2ms).
2024-04-01 18:04:05.520 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:04:05.525 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:05.526 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:04:05.528 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:04:05.529 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-01 18:04:05.532 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:04:05.539 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:04:05.541 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:05.543 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 18:04:05.544 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:05.545 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:04:05.546 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityid_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2024-04-01 18:04:05.558 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityid_0) && (p.Id == @__pointOfInterestId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 18:04:05.560 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:04:05.561 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:05.561 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:04:05.561 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:04:05.561 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:04:05.561 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 18:04:05.561 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 18:04:05.566 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:04:05.570 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:05.570 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 9ms reading results.
2024-04-01 18:04:05.570 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:05.570 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:04:05.575 +08:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-04-01 18:04:05.576 +08:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-04-01 18:04:05.580 +08:00 [DBG] The unchanged property 'PointOfInterest.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-01 18:04:05.582 +08:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:04:05.583 +08:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-04-01 18:04:05.598 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:04:05.598 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:05.598 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:04:05.598 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:04:05.598 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:04:05.599 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Name" = @p0
WHERE "Id" = @p1
RETURNING 1;
2024-04-01 18:04:05.599 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Name" = @p0
WHERE "Id" = @p1
RETURNING 1;
2024-04-01 18:04:05.600 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:05.601 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 1ms reading results.
2024-04-01 18:04:05.601 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:05.601 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:04:05.602 +08:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:04:05.602 +08:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-04-01 18:04:05.603 +08:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-04-01 18:04:05.604 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API) in 540.2024ms
2024-04-01 18:04:05.604 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2024-04-01 18:04:05.605 +08:00 [DBG] Connection id "0HN2I6C848UGU" completed keep alive response.
2024-04-01 18:04:05.605 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 18:04:05.607 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:04:05.607 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:04:05.607 +08:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7169/api/cities/1/pointsofinterest/1 - 204 null null 572.8714ms
2024-04-01 18:04:09.179 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities - null null
2024-04-01 18:04:09.186 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 18:04:09.187 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-04-01 18:04:09.187 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-04-01 18:04:09.187 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 18:04:09.188 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 18:04:09.190 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 18:04:09.190 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 18:04:09.190 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 18:04:09.190 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 18:04:09.190 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 18:04:09.190 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 18:04:09.190 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 18:04:09.190 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 18:04:09.199 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 18:04:09.200 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-04-01 18:04:09.204 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 18:04:09.204 +08:00 [DBG] Creating DbConnection.
2024-04-01 18:04:09.204 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 18:04:09.204 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:04:09.205 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:09.205 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:04:09.205 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:04:09.205 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:04:09.205 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 18:04:09.205 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 18:04:09.206 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:04:09.207 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:04:09.207 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:04:09.207 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:09.207 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 2ms reading results.
2024-04-01 18:04:09.207 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:09.207 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:04:09.211 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 18:04:09.212 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 18:04:09.212 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 18:04:09.212 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 18:04:09.213 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 18:04:09.213 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 18:04:09.228 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 38.437ms
2024-04-01 18:04:09.229 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 18:04:09.229 +08:00 [DBG] Connection id "0HN2I6C848UGU" completed keep alive response.
2024-04-01 18:04:09.229 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 18:04:09.229 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:04:09.229 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:04:09.229 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities - 200 247 application/json; charset=utf-8 50.4832ms
2024-04-01 18:04:19.108 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - null null
2024-04-01 18:04:19.111 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 18:04:19.111 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 18:04:19.111 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 18:04:19.111 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 18:04:19.112 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 18:04:19.115 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 18:04:19.115 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 18:04:19.116 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 18:04:19.116 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 18:04:19.116 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 18:04:19.116 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 18:04:19.116 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:04:19.119 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:04:19.120 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:04:19.121 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 18:04:19.121 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:04:19.121 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:04:19.121 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:04:19.121 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:04:19.141 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 18:04:19.142 +08:00 [DBG] Creating DbConnection.
2024-04-01 18:04:19.142 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 18:04:19.142 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:04:19.143 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:19.143 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:04:19.143 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:04:19.143 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:04:19.143 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:04:19.143 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:04:19.144 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:19.144 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:04:19.144 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:19.144 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:04:19.145 +08:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-04-01 18:04:19.147 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContext.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-04-01 18:04:19.147 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:04:19.147 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:19.147 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:04:19.147 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:04:19.147 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:04:19.147 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 18:04:19.148 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 18:04:19.148 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:04:19.149 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:04:19.149 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:04:19.149 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:04:19.149 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:04:19.149 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:19.149 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:04:19.149 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:04:19.149 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:04:19.150 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 18:04:19.150 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 18:04:19.150 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 18:04:19.151 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 18:04:19.151 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 18:04:19.151 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 18:04:19.152 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 36.0243ms
2024-04-01 18:04:19.152 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 18:04:19.153 +08:00 [DBG] Connection id "0HN2I6C848UGU" completed keep alive response.
2024-04-01 18:04:19.153 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 18:04:19.153 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:04:19.153 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:04:19.153 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - 200 545 application/json; charset=utf-8 45.6692ms
2024-04-01 18:06:28.081 +08:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7169/api/cities/1/pointsofinterest/1 - null null
2024-04-01 18:06:28.083 +08:00 [DBG] DELETE requests are not supported
2024-04-01 18:06:28.083 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 18:06:28.083 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 18:06:28.083 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-04-01 18:06:28.083 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-04-01 18:06:28.086 +08:00 [INF] Route matched with {action = "DeletePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeletePointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 18:06:28.087 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 18:06:28.087 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 18:06:28.087 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 18:06:28.087 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 18:06:28.087 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 18:06:28.087 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:06:28.088 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:06:28.088 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:06:28.088 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 18:06:28.088 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:28.088 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:28.088 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:06:28.088 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:28.088 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 18:06:28.088 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 18:06:28.088 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:06:28.088 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:06:28.088 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 18:06:28.088 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:06:28.091 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 18:06:28.091 +08:00 [DBG] Creating DbConnection.
2024-04-01 18:06:28.091 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 18:06:28.091 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:28.091 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:28.092 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:28.092 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:28.092 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:28.092 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:06:28.092 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:06:28.092 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:28.092 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:28.092 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:28.092 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:28.092 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:28.092 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:28.092 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:28.093 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:28.093 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:28.093 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 18:06:28.093 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 18:06:28.093 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:28.093 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:28.093 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:28.093 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:28.093 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:28.095 +08:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:28.095 +08:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-04-01 18:06:28.095 +08:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-04-01 18:06:28.096 +08:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-04-01 18:06:28.103 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:28.103 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:28.103 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:28.103 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:28.103 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:28.103 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointsOfInterest"
WHERE "Id" = @p0
RETURNING 1;
2024-04-01 18:06:28.103 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointsOfInterest"
WHERE "Id" = @p0
RETURNING 1;
2024-04-01 18:06:28.104 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:28.104 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:28.104 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:28.104 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:28.106 +08:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:28.106 +08:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-04-01 18:06:28.106 +08:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-04-01 18:06:28.106 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API) in 19.2347ms
2024-04-01 18:06:28.106 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-04-01 18:06:28.107 +08:00 [DBG] Connection id "0HN2I6C848UGU" completed keep alive response.
2024-04-01 18:06:28.107 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 18:06:28.107 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:28.107 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:28.107 +08:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7169/api/cities/1/pointsofinterest/1 - 204 null null 26.4829ms
2024-04-01 18:06:34.961 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - null null
2024-04-01 18:06:34.962 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 18:06:34.962 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 18:06:34.963 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 18:06:34.963 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 18:06:34.963 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 18:06:34.963 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 18:06:34.963 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 18:06:34.963 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 18:06:34.964 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 18:06:34.964 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 18:06:34.964 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 18:06:34.964 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:06:34.965 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:06:34.965 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:06:34.965 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 18:06:34.965 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:34.965 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:34.965 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:06:34.965 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:34.967 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 18:06:34.967 +08:00 [DBG] Creating DbConnection.
2024-04-01 18:06:34.968 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 18:06:34.968 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:34.968 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:34.968 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:34.968 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:34.968 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:34.969 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:06:34.969 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:06:34.969 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:34.969 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:34.969 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:34.970 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:34.971 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:34.971 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:34.971 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:34.971 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:34.971 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:34.971 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 18:06:34.972 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 18:06:34.972 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:34.972 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:34.972 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:34.973 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:34.973 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:34.973 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:34.973 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:34.973 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:34.973 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:34.975 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 18:06:34.975 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 18:06:34.975 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 18:06:34.975 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 18:06:34.975 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 18:06:34.976 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 18:06:34.976 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 12.379ms
2024-04-01 18:06:34.977 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 18:06:34.977 +08:00 [DBG] Connection id "0HN2I6C848UGU" completed keep alive response.
2024-04-01 18:06:34.977 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 18:06:34.977 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:34.977 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:34.977 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - 200 545 application/json; charset=utf-8 16.2084ms
2024-04-01 18:06:42.407 +08:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7169/api/cities/1/pointsofinterest/1 - null null
2024-04-01 18:06:42.408 +08:00 [DBG] DELETE requests are not supported
2024-04-01 18:06:42.408 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 18:06:42.408 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 18:06:42.408 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-04-01 18:06:42.408 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-04-01 18:06:42.408 +08:00 [INF] Route matched with {action = "DeletePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeletePointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 18:06:42.409 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 18:06:42.409 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 18:06:42.409 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 18:06:42.409 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 18:06:42.409 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 18:06:42.409 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:06:42.410 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:06:42.410 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:06:42.410 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 18:06:42.410 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:42.410 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:42.410 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:06:42.410 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:42.411 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 18:06:42.411 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 18:06:42.411 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:06:42.411 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:06:42.411 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 18:06:42.411 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:06:42.412 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 18:06:42.412 +08:00 [DBG] Creating DbConnection.
2024-04-01 18:06:42.413 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 18:06:42.413 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:42.413 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:42.413 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:42.413 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:42.413 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:42.413 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:06:42.414 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:06:42.414 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:42.414 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:42.414 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:42.414 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:42.414 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:42.415 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:42.415 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:42.415 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:42.415 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:42.415 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 18:06:42.415 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 18:06:42.416 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:42.416 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:42.416 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:42.416 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:42.417 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 18:06:42.417 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 18:06:42.418 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-04-01 18:06:42.418 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 18:06:42.419 +08:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-04-01 18:06:42.433 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API) in 23.6572ms
2024-04-01 18:06:42.433 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-04-01 18:06:42.433 +08:00 [DBG] Connection id "0HN2I6C848UGU" completed keep alive response.
2024-04-01 18:06:42.433 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 18:06:42.433 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:42.433 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:42.433 +08:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7169/api/cities/1/pointsofinterest/1 - 404 162 application/problem+json; charset=utf-8 27.1034ms
2024-04-01 18:06:47.828 +08:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7169/api/cities/1/pointsofinterest/2 - null null
2024-04-01 18:06:47.829 +08:00 [DBG] DELETE requests are not supported
2024-04-01 18:06:47.830 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/2'
2024-04-01 18:06:47.830 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointsofinterest/2'
2024-04-01 18:06:47.830 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-04-01 18:06:47.830 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-04-01 18:06:47.831 +08:00 [INF] Route matched with {action = "DeletePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeletePointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 18:06:47.831 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 18:06:47.831 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 18:06:47.831 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 18:06:47.831 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 18:06:47.831 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 18:06:47.831 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:06:47.832 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:06:47.832 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:06:47.832 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 18:06:47.833 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:47.833 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:47.833 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:06:47.833 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:47.833 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 18:06:47.833 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 18:06:47.833 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:06:47.833 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:06:47.834 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 18:06:47.834 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:06:47.835 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 18:06:47.835 +08:00 [DBG] Creating DbConnection.
2024-04-01 18:06:47.836 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 18:06:47.836 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:47.836 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:47.836 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:47.836 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:47.836 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:47.837 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:06:47.837 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:06:47.837 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:47.837 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:47.837 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:47.837 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:47.838 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:47.838 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:47.838 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:47.838 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:47.838 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:47.839 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 18:06:47.839 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 18:06:47.839 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:47.839 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:47.839 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:47.840 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:47.840 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:47.840 +08:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:47.840 +08:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-04-01 18:06:47.840 +08:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-04-01 18:06:47.840 +08:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-04-01 18:06:47.841 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:47.841 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:47.842 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:47.842 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:47.842 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:47.842 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointsOfInterest"
WHERE "Id" = @p0
RETURNING 1;
2024-04-01 18:06:47.842 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointsOfInterest"
WHERE "Id" = @p0
RETURNING 1;
2024-04-01 18:06:47.844 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:47.844 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 1ms reading results.
2024-04-01 18:06:47.844 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:47.844 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:47.844 +08:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:47.845 +08:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-04-01 18:06:47.845 +08:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-04-01 18:06:47.845 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API) in 13.7119ms
2024-04-01 18:06:47.845 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-04-01 18:06:47.845 +08:00 [DBG] Connection id "0HN2I6C848UGU" completed keep alive response.
2024-04-01 18:06:47.846 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 18:06:47.846 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:47.846 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:47.846 +08:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7169/api/cities/1/pointsofinterest/2 - 204 null null 17.763ms
2024-04-01 18:06:50.476 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities - null null
2024-04-01 18:06:50.477 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 18:06:50.477 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-04-01 18:06:50.477 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-04-01 18:06:50.477 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 18:06:50.477 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 18:06:50.477 +08:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 18:06:50.477 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 18:06:50.477 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 18:06:50.477 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 18:06:50.477 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 18:06:50.478 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 18:06:50.478 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 18:06:50.478 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 18:06:50.479 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 18:06:50.479 +08:00 [DBG] Creating DbConnection.
2024-04-01 18:06:50.480 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 18:06:50.480 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:50.480 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:50.480 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:50.480 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:50.480 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:50.480 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 18:06:50.480 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2024-04-01 18:06:50.481 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:50.481 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:50.481 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:50.481 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:50.481 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:50.481 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:50.481 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:50.482 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 18:06:50.482 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 18:06:50.482 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 18:06:50.482 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 18:06:50.482 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 18:06:50.483 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 18:06:50.483 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 5.3397ms
2024-04-01 18:06:50.484 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-04-01 18:06:50.484 +08:00 [DBG] Connection id "0HN2I6C848UGU" completed keep alive response.
2024-04-01 18:06:50.484 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 18:06:50.484 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:50.485 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:50.485 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities - 200 247 application/json; charset=utf-8 9.1726ms
2024-04-01 18:06:53.349 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/1 - null null
2024-04-01 18:06:53.350 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 18:06:53.351 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2024-04-01 18:06:53.351 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2024-04-01 18:06:53.351 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 18:06:53.352 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 18:06:53.355 +08:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-04-01 18:06:53.355 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 18:06:53.356 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 18:06:53.356 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 18:06:53.356 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 18:06:53.356 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 18:06:53.356 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 18:06:53.357 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-04-01 18:06:53.357 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-01 18:06:53.358 +08:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-01 18:06:53.358 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 18:06:53.358 +08:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-01 18:06:53.358 +08:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-01 18:06:53.358 +08:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-01 18:06:53.358 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 18:06:53.358 +08:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2024-04-01 18:06:53.359 +08:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 18:06:53.359 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 18:06:53.360 +08:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 18:06:53.360 +08:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-04-01 18:06:53.361 +08:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-04-01 18:06:53.366 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 18:06:53.367 +08:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-04-01 18:06:53.372 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContext.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-01 18:06:53.372 +08:00 [DBG] Creating DbConnection.
2024-04-01 18:06:53.372 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 18:06:53.373 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:53.373 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:53.373 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:53.373 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:53.373 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:53.373 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 18:06:53.374 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-04-01 18:06:53.374 +08:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:53.374 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:53.374 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:53.374 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:53.374 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:53.376 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 18:06:53.377 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 18:06:53.377 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 18:06:53.377 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 18:06:53.377 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 18:06:53.377 +08:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointsOfInterestDto'.
2024-04-01 18:06:53.378 +08:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 21.3509ms
2024-04-01 18:06:53.378 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-04-01 18:06:53.378 +08:00 [DBG] Connection id "0HN2I6C848UGU" completed keep alive response.
2024-04-01 18:06:53.378 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 18:06:53.378 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:53.378 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:53.378 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/1 - 200 75 application/json; charset=utf-8 28.8439ms
2024-04-01 18:06:56.277 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - null null
2024-04-01 18:06:56.277 +08:00 [DBG] The request path  does not match the path filter
2024-04-01 18:06:56.277 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-04-01 18:06:56.277 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-04-01 18:06:56.277 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 18:06:56.277 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 18:06:56.278 +08:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 18:06:56.278 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 18:06:56.278 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 18:06:56.278 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 18:06:56.278 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 18:06:56.278 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 18:06:56.278 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:06:56.279 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:06:56.279 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:06:56.279 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 18:06:56.279 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:56.279 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:56.279 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:06:56.279 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:06:56.280 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 18:06:56.280 +08:00 [DBG] Creating DbConnection.
2024-04-01 18:06:56.281 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 18:06:56.281 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:56.281 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:56.281 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:56.281 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:56.281 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:56.281 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:06:56.281 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:06:56.282 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:56.282 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:06:56.282 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:56.282 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:56.282 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:56.283 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:56.283 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:06:56.283 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:56.283 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:06:56.283 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 18:06:56.283 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-04-01 18:06:56.284 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:56.284 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:56.284 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:56.284 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:56.284 +08:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-01 18:06:56.284 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:56.285 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 1ms reading results.
2024-04-01 18:06:56.285 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:06:56.285 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:56.285 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 18:06:56.285 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 18:06:56.285 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-01 18:06:56.285 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-01 18:06:56.285 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-01 18:06:56.286 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-01 18:06:56.286 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 7.6286ms
2024-04-01 18:06:56.286 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-04-01 18:06:56.286 +08:00 [DBG] Connection id "0HN2I6C848UGU" completed keep alive response.
2024-04-01 18:06:56.286 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 18:06:56.286 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:06:56.286 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:06:56.286 +08:00 [INF] Request finished HTTP/1.1 GET https://localhost:7169/api/cities/3/pointsofinterest - 200 545 application/json; charset=utf-8 9.9699ms
2024-04-01 18:07:04.271 +08:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7169/api/cities/1/pointsofinterest/1 - application/json 101
2024-04-01 18:07:04.271 +08:00 [DBG] PATCH requests are not supported
2024-04-01 18:07:04.272 +08:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 18:07:04.272 +08:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2024-04-01 18:07:04.272 +08:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2024-04-01 18:07:04.272 +08:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2024-04-01 18:07:04.273 +08:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-04-01 18:07:04.273 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-01 18:07:04.273 +08:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-01 18:07:04.274 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-01 18:07:04.274 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-01 18:07:04.274 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-01 18:07:04.274 +08:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:07:04.275 +08:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-04-01 18:07:04.276 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:07:04.276 +08:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-04-01 18:07:04.276 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:07:04.277 +08:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:07:04.277 +08:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-04-01 18:07:04.277 +08:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-04-01 18:07:04.278 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 18:07:04.278 +08:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-04-01 18:07:04.278 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:07:04.278 +08:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:07:04.279 +08:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-04-01 18:07:04.279 +08:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-04-01 18:07:04.279 +08:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' ...
2024-04-01 18:07:04.279 +08:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' using the name '' in request data ...
2024-04-01 18:07:04.279 +08:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-04-01 18:07:04.279 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-04-01 18:07:04.280 +08:00 [DBG] Connection id "0HN2I6C848UGU", Request id "0HN2I6C848UGU:0000000B": started reading request body.
2024-04-01 18:07:04.280 +08:00 [DBG] Connection id "0HN2I6C848UGU", Request id "0HN2I6C848UGU:0000000B": done reading request body.
2024-04-01 18:07:04.282 +08:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2024-04-01 18:07:04.282 +08:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2024-04-01 18:07:04.282 +08:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' ...
2024-04-01 18:07:04.283 +08:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2024-04-01 18:07:04.285 +08:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-04-01 18:07:04.285 +08:00 [DBG] Creating DbConnection.
2024-04-01 18:07:04.285 +08:00 [DBG] Created DbConnection. (0ms).
2024-04-01 18:07:04.286 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:07:04.286 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:07:04.286 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:07:04.286 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:07:04.286 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:07:04.287 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:07:04.287 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-04-01 18:07:04.287 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:07:04.287 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:07:04.287 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:07:04.287 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:07:04.288 +08:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:07:04.288 +08:00 [DBG] Opened connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:07:04.288 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-01 18:07:04.289 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:07:04.289 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-01 18:07:04.289 +08:00 [DBG] Executing DbCommand [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 18:07:04.289 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityid_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-04-01 18:07:04.290 +08:00 [DBG] Closing data reader to 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:07:04.290 +08:00 [DBG] A data reader for 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db' is being disposed after spending 0ms reading results.
2024-04-01 18:07:04.290 +08:00 [DBG] Closing connection to database 'main' on server '/Users/leonlee/Desktop/workspace/csharpworkspace/CityInfo/CityInfo.API/CityInfo.db'.
2024-04-01 18:07:04.290 +08:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:07:04.291 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-04-01 18:07:04.291 +08:00 [DBG] No information found on request to perform content negotiation.
2024-04-01 18:07:04.291 +08:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-04-01 18:07:04.291 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-01 18:07:04.292 +08:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-04-01 18:07:04.292 +08:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API) in 17.9195ms
2024-04-01 18:07:04.292 +08:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2024-04-01 18:07:04.293 +08:00 [DBG] Connection id "0HN2I6C848UGU" completed keep alive response.
2024-04-01 18:07:04.293 +08:00 [DBG] 'CityInfoContext' disposed.
2024-04-01 18:07:04.293 +08:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-04-01 18:07:04.293 +08:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-04-01 18:07:04.293 +08:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7169/api/cities/1/pointsofinterest/1 - 404 162 application/problem+json; charset=utf-8 22.282ms
